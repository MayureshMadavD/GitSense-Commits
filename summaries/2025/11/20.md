# Activity Summary for 20/11/2025

## 10:51:51
For `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx` (Timestamp: 16/11/2025, 13:10:34):
This file introduces a `BrandPage` component for customizing a brand's UI. Key features include logo upload functionality with validation (file type, size), interaction with AWS S3 via pre-signed URLs (`presingedLogoUrl`, `makeAWSPutCall`), and a color picker for selecting the primary theme color. It fetches existing merchant logo and custom CSS configurations on component mount and provides a "Save Changes" button to persist updates through API calls.

For `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx` (Timestamp: 17/11/2025, 16:22:51):
An enhanced `ProductSearch` component was implemented, designed for searching and selecting products or collections in contexts like discount or free gift configurations. It features infinite scrolling, debounced search input, a modal for item selection, and robust logic for handling product variants, quantities, and filtering (e.g., `isAgentLed` to exclude 'no-agent' tagged items). It also includes specific handling for "top-up gifts" and quantity validation for collections.

For `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx` (Timestamp: 17/11/2025, 16:23:04):
The order details page received significant updates. Changes include a custom currency formatter (`formatAmountWithCurrency`), improved handling of refund data with a `mergeRepeatedRefunds` function to consolidate multiple attempts, and dynamic calculation of refundable amounts to control the refund button's state. Logic was added to set an "Edit Order" title with conditional messages based on applied rewards or discount types (e.g., Twid rewards, GWP discounts). Price breakup calculations for various discounts, taxes, shipping, and gift cards were also refined.

For `/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs` (Timestamp: 18/11/2025, 00:45:31):
This `index.ejs` template, acting as the micro-frontend shell for the dashboard, was configured to load various `@gokwik` micro-frontends (e.g., `@gokwik/configuration`, `@gokwik/checkout`, `@gokwik/payment`) using `systemjs-importmap`. These import maps are dynamically set based on the `deployedEnv` (local, dev, qa, sandbox, production). It also sets up a Content Security Policy (CSP) and integrates external monitoring tools like Clarity and New Relic for the production environment.

For `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx` (Timestamps: 18/11/2025, 00:49:40, 18/11/2025, 00:50:14, 18/11/2025, 00:58:39):
This component manages free gift rules. It provides a form for defining rule details such as name, applicable sales channels, purchase requirements (cart value/quantity), and what the gift applies to (all products, specific products, specific collections). It integrates the `ProductSearch` component for selecting free gift items and applicable products/collections. Rules can be enabled/disabled, edited, or deleted via a table interface. The multiple timestamps for this file with identical content suggest non-functional saves or formatting changes.

For `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx` (Timestamp: 18/11/2025, 23:42:52):
A new `CustomizeUiFields` component was introduced to enable granular customization of the order confirmation page. It organizes various UI elements (Brand Logo, Dynamic Banners, Trust Banner, Order Details, Customer Information, Support & Communication) into collapsible sections. Each section includes fields for content, color customization via `ColorPickerHelper`, and an enable/disable switch. A significant addition is the drag-and-drop functionality, allowing users to reorder these sections on the confirmation page.

For `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx` (Timestamps: 19/11/2025, 21:10:01, 19/11/2025, 21:11:54, 19/11/2025, 21:12:22, 19/11/2025, 21:12:29):
This file marks the introduction of the main "Order Confirmation Page" settings. It acts as a container for configuring the post-purchase experience, including an overall switch to enable/disable the custom confirmation page and an alert message. It integrates `MainSection` (which likely uses components like `CustomizeUiFields`) for detailed customization and displays an `OrderConfirmationPreview` in a side panel. The `handleFormSubmit` function handles form validation, with specific fields excluded. Minor layout adjustments to the column widths for the form and preview sections were observed across the subsequent timestamps.

**Patterns and Recurring Elements:**

*   **UI Customization Focus:** A consistent pattern across multiple files is the extensive focus on customizing the user interface (checkout, brand page, order confirmation page) using `gokwik-ui-kit` components like `Form`, `Card`, `Switch`, `ColorPicker`, and dynamic field rendering (`RenderField`).
*   **Merchant Configuration Management:** The `useMerchantConfigApi` hook is frequently used for fetching and saving merchant-specific configurations, indicating a centralized approach to managing settings across different dashboard features.
*   **Micro-frontend Architecture:** The dashboard utilizes a `single-spa` micro-frontend architecture, as evidenced by `index.ejs` dynamically loading various `@gokwik` micro-frontends via `systemjs-importmap` based on the deployment environment.
*   **Form-driven UI:** Most configuration pages are built around `gokwik-ui-kit`'s `Form` component, leveraging `Form.useForm()`, `Form.useWatch()`, and validation rules for robust data input and management.
*   **Breadcrumb Navigation:** The `updateBreadcrumbs` utility is consistently used to manage and update navigation paths across different pages.
*   **Component Reusability:** Components like `ProductSearch` and `RenderField` are designed to be generic and reusable across various settings pages.
*   **API Interactions:** `makeAPICall` is the standard utility for backend communication, ensuring consistent data fetching and updates.

## 12:51:51
The log details recent development on a `Gokwik` dashboard UI, primarily focusing on merchant settings, order details, and general UI configuration.

**File-Specific Updates:**

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx`** (Timestamp: 16/11/2025, 13:10:34)
    *   This file manages the "Brand Page" for customizing checkout UI. It includes functionalities for uploading and managing merchant logos (fetching existing, getting presigned URLs for new uploads, client-side validation, uploading to AWS S3, and updating Redux state), along with a color picker for theme customization. Form handling is done using Ant Design's `Form` and includes `useEffect` hooks to synchronize form data with merchant configuration. A "Save Changes" button is enabled based on form modifications.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx`** (Timestamp: 17/11/2025, 16:22:51)
    *   A versatile `ProductSearch` component for finding and selecting Shopify products or collections. It supports infinite scrolling (`useIntersectionObserver`), debounced search, filtering by agent-led tags, and displays results in a modal. It allows for managing selected items, including incrementing/removing quantities and handling specific gift pricing. The component is highly configurable with props to hide elements, specify search type, and control item selection behavior.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx`** (Timestamp: 17/11/2025, 16:23:04)
    *   This page displays comprehensive order details. It fetches order information, processes refund data (merging repeated attempts), calculates various price breakups (discounts, taxes, shipping, gift cards, rewards), and determines the refundable amount. It includes UI for displaying order status, customer contact information (masked initially), and conditionally disabling the edit order button based on applied rewards/discounts. Currency formatting is dynamically set based on order data or merchant details.

*   **`/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs`** (Timestamp: 18/11/2025, 00:45:31)
    *   This is the main HTML template for a Single-SPA micro-frontend application. It defines the Content Security Policy, imports shared React dependencies, and conditionally loads micro-frontend applications (`@gokwik/configuration`, `@gokwik/utilities`, `@gokwik/dashboard`, `@gokwik/checkout`, etc.) based on the deployment environment (local, dev, qa, sandbox, production). Notably, the `sandbox` environment import URLs for several `@gokwik` applications were updated, and the `production` environment includes scripts for Microsoft Clarity and New Relic for analytics and application performance monitoring.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx`** (Timestamps: 18/11/2025, 00:49:40, 18/11/2025, 00:50:14, 18/11/2025, 00:58:39)
    *   This page configures "Free Gift" rules. It uses `useMerchantConfigApi` for configuration management and `ProductSearch` for selecting free gift products. The UI allows defining rules with a name, sales channels (app, web, agent-led), purchase requirements (cart value, quantity), min/max values, applicability (all products, specific products/collections), gift quantity/price, and application method (auto or customer selection). Rules can be added, edited, deleted, and enabled/disabled via a table interface. The multiple timestamps for this file with identical content suggest repeated saves without significant code changes or quick versioning during development.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx`** (Timestamp: 18/11/2025, 23:42:52)
    *   A new component, `CustomizeUiFields`, was added to structure and manage various customizable sections of the order confirmation page. It uses collapsible panels (`Collapse` from `gokwik-ui-kit`) for "Brand Logo Customization," "Dynamic Banners," "TrustBanner," "Order Details," "Customer Information," and "Support & Communication." Each section can be enabled/disabled via a `Switch` and includes form fields for text, colors (`ColorPickerHelper`), and linking custom components like `LogoPage` and `TrustBadgeForm`. It also implements drag-and-drop functionality to reorder these sections.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx`** (Timestamps: 19/11/2025, 21:10:01, 19/11/2025, 21:11:54, 19/11/2025, 21:12:22, 19/11/2025, 21:12:29)
    *   This is the main page for configuring the custom order confirmation page, using the `CustomizeUiFields` component internally. It provides an "Enable Custom Order Confirmation Page" switch and an informational `Alert`. The page is split into two columns: a left column for the configuration `Form` and a right column for an `OrderConfirmationPreview`. Over several minor updates, the `flex` properties of the layout columns were adjusted multiple times, eventually settling on `flex='1 1 300px'` for the form column and `flex='0 1 500px'` for the preview column, indicating iterative fine-tuning of the responsive layout. Form validation and a "Save Changes" button (enabled on modification) are also present.

**Timestamps of Significant Changes:**

*   **16/11/2025, 13:10:34:** Initial development or major update to the Brand Page UI customization.
*   **17/11/2025, 16:22:51 - 16:23:04:** Concurrent work on core components like `ProductSearch` and a detailed `OrderDetails` page.
*   **18/11/2025, 00:45:31:** Crucial infrastructure update in `index.ejs` for micro-frontend configuration, especially for the `sandbox` environment and production monitoring.
*   **18/11/2025, 23:42:52:** Introduction of a new, complex component (`collapseFields.tsx`) for modular UI customization of the order confirmation page.
*   **19/11/2025, 21:10:01 - 21:12:29:** Rapid iterations on the `OrderConfirmationPage` layout and structure, indicating active UI/UX refinement.

**Patterns and Recurring Elements:**

*   **Standardized UI Library:** The `gokwik-ui-kit` is consistently used across all UI-related files, ensuring a cohesive look and feel.
*   **Ant Design Forms:** Ant Design's `Form` component with `useForm` and `useWatch` hooks is a pervasive pattern for complex form state management and data binding.
*   **Merchant Configuration Management:** The `useMerchantConfigApi` hook (from `@library/utilities/hooks/useMerchantConfig`) is frequently used for fetching and saving merchant-specific settings, highlighting a centralized approach to configuration.
*   **API Interactions:** `makeAPICall` is a common utility for network requests, typically paired with `APIEndPoints` for structured API access.
*   **State Management:** Redux (`useSelector`, `useAppDispatch`) handles global state (e.g., merchant details), while `useState` manages local component states.
*   **UI Customization Focus:** A significant portion of the changes (Brand Page, Order Confirmation Page, Free Gift) revolves around providing merchants granular control over their checkout and post-purchase UI/UX.
*   **Breadcrumbs:** `updateBreadcrumbs` utility is used across different pages to maintain consistent navigation.
*   **Micro-frontend Architecture:** The `index.ejs` file clearly indicates the use of Single-SPA and SystemJS for a micro-frontend setup, allowing different parts of the dashboard to be developed and deployed independently.
*   **Observability:** Integration of New Relic and Microsoft Clarity signifies an emphasis on monitoring application performance and user behavior in production.

## 13:51:52
**File-Specific Updates:**

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx`** (Timestamp: 16/11/2025, 13:10:34)
    *   This file, responsible for brand UI customization, received significant updates to its logo upload and color picking functionality.
    *   It now includes robust client-side image validation (file type and size up to 2MB for JPG, PNG, SVG).
    *   The logo upload process involves cleaning images with a canvas, generating unique image paths, fetching pre-signed AWS S3 URLs, and performing the actual AWS S3 PUT call.
    *   Existing logo and primary theme color are fetched from merchant configuration upon component load.
    *   A "Save Changes" button is introduced, which is disabled by default and enabled only when form values are modified, providing clear feedback to the user.
    *   The UI integrates `InfoComponent` for descriptive help, `ColorPicketComponent` for theme selection, and an `Upload` component for the logo, featuring a live preview of the uploaded logo or a placeholder.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx`** (Timestamp: 17/11/2025, 16:22:51)
    *   The `ProductSearch` component, used for selecting products or collections in discount/free gift configurations, has been enhanced with new features.
    *   It now supports filtering products based on an `isAgentLed` prop, which excludes items tagged with 'no-agent'.
    *   A `topUpGift` feature introduces an `InputNumber` to specify an "Offered Price" for freebies directly within the product display.
    *   For collections, `collectionSpecificData` is introduced to manage quantities, including validation to ensure collection quantity does not exceed a predefined minimum purchase quantity.
    *   The `parseResponse` function was updated to handle `collateProducts`, grouping product variants and tracking minimum prices and total variants.
    *   Functions `handleGiftPrice`, `handleQuantityChange`, and `handleCloseAllInput` manage these new functionalities.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx`** (Timestamp: 17/11/2025, 16:23:04)
    *   The order details page received extensive updates, focusing on improved data display, refund management, and currency formatting.
    *   New constants for RTO (Return to Origin) reasons and permissions, along with an internal team identifier, were added.
    *   A custom `formatAmountWithCurrency` helper ensures consistent currency symbol display globally.
    *   A `mergeRepeatedRefunds` utility function was added to aggregate and simplify the display of multiple refund attempts, improving clarity on refund status and attempts.
    *   New states were introduced to control the visibility of customer contact information (phone and email) and display order failure reasons.
    *   The refund button's state (disabled, refundable amount) is now dynamically calculated based on successful and pending transactions, along with store credits.
    *   Logic was added to disable order editing under specific conditions, such as when Twid rewards, GWP discounts, or loyalty points are applied.
    *   The method for fetching order details was adjusted to conditionally include a hash for non-merchant users.
    *   Detailed calculations for `total_discount`, `tax`, `shipping_and_cod_charges`, and `gift_card_and_rewards` were refined, pulling data from various price breakup values.

*   **`/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs`** (Timestamp: 18/11/2025, 00:45:31)
    *   This EJS template, which defines the dashboard's main structure and micro-frontend loading, underwent several infrastructural enhancements.
    *   It now includes a `favicon.svg` and updated `Content-Security-Policy` rules to support `data:` and `http:` for images.
    *   A global `window.fcWidgetMessengerConfig` was added, likely for a chat widget.
    *   New Relic browser monitoring script was embedded specifically for the `production` environment, along with Microsoft Clarity analytics when a `clarityKey` is present.
    *   The `systemjs-importmap` configurations for `dev`, `qa`, `sandbox`, and `production` environments were expanded to include new micro-frontends: `@gokwik/kwikcomm`, `@gokwik/checkout-platform`, `@gokwik/shopify-app`, and `@gokwik/ellora`, indicating an ongoing expansion and modularization of the dashboard.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx`** (Timestamps: 18/11/2025, 00:49:40; 18/11/2025, 00:50:14; 18/11/2025, 00:58:39)
    *   This component manages the creation and configuration of automatic free gift rules.
    *   The `initialValues` for new rules have been explicitly defined, including default sales channels, purchase requirements, and application methods.
    *   The form fields are dynamically rendered using `RenderField` and include options for rule name, sales channels (with `shopify_agent` channel dynamically enabled/disabled based on application method), purchase type (cart value or quantity), min/max value validation, and applicability on all, specific products, or specific collections.
    *   A `ProductSearch` component is integrated for selecting the free gift product, along with input fields for free gift quantity and price.
    *   The "Free Gift Addition Method" (Auto or Selection) and a "Selection Limit" (conditionally hidden) are now configurable.
    *   A table displays existing free gift rules, allowing users to enable/disable them via a `Switch` and offering "Edit" and "Delete" actions through a `Dropdown`.
    *   The content of this file is identical across all three timestamps, suggesting repeated saving without functional changes, or minor unlogged changes that were reverted.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx`** (Timestamp: 18/11/2025, 23:42:52)
    *   This new component provides a highly configurable and reorderable interface for customizing various sections of the order confirmation page.
    *   It introduces collapsible panels for "Brand Logo Customization," "Dynamic Banners," "TrustBanner," "Order Details," "Customer Information," and "Support & Communication."
    *   Each section can be individually enabled/disabled via a `Switch` in the panel header.
    *   Customization options within each section include `Input` fields for text (e.g., confirmation message, heading text, button text) with length constraints, and `ColorPickerHelper` components for setting background and text colors.
    *   A key feature is the implementation of drag-and-drop functionality, allowing users to reorder the collapsible sections directly within the UI, which updates the underlying form structure.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx`** (Timestamps: 19/11/2025, 21:10:01; 19/11/2025, 21:11:54; 19/11/2025, 21:12:22; 19/11/2025, 21:12:29)
    *   This page serves as the main interface for customizing the order confirmation page, featuring both form controls and a live preview.
    *   It includes a global switch to "Enable Custom Order Confirmation Page" and an `Alert` providing information about redirecting customers from Shopify.
    *   The page is divided into two columns: a left column for form inputs (`InfoComponent`, "Save Changes" button, and `MainSection` which likely contains the `CollapseFields` component) and a right column displaying an `OrderConfirmationPreview`.
    *   The `handleFormSubmit` function was refined to selectively validate form fields, excluding specific fields like `trust_text` and `trust_tag` which might not require validation.
    *   The multiple rapid commits within minutes indicate active UI layout adjustments, specifically regarding the `flex` properties of the left and right columns (e.g., `flex='1 1 200px'` vs. `flex='1 1 300px'`), suggesting iterative design tweaks for the responsive layout of the settings page. The core functionality remained stable across these layout changes.

**Patterns and Recurring Elements:**

1.  **UI Kit Consistency:** All `checkout-dashboard-ui` files heavily utilize `gokwik-ui-kit` components (Button, Form, Card, Row, Col, Input, Switch, Dropdown, Table, message, Tooltip, Alert), indicating a consistent design system.
2.  **Form Management:** Extensive use of Ant Design's `Form` API, including `Form.useForm()`, `Form.useWatch()`, `Form.Item`, `Form.setFieldValue()`, and `form.validateFields()` for handling complex form states and user inputs.
3.  **Merchant Configuration through Hooks:** The `useMerchantConfigApi` hook is a recurring pattern for fetching, modifying, and saving merchant-specific configurations, centralizing settings management.
4.  **Micro-frontend Architecture:** The `index.ejs` file clearly demonstrates a micro-frontend setup, loading different `@gokwik/*` applications dynamically based on the deployment environment, supporting modular development and deployment.
5.  **Environment-Specific Configuration:** Both the `.env` (not summarized but noted for context) and `index.ejs` files highlight the use of environment variables and conditional loading for different deployment stages (dev, qa, sandbox, production).
6.  **Breadcrumbs Management:** The `updateBreadcrumbs` utility is consistently used to manage navigation paths across different pages, ensuring a coherent user experience.
7.  **Iterative UI/UX Refinement:** The frequent, minor changes within a short time frame for `freeGift.tsx` and `orderConfirmation/index.tsx` point to an active and iterative process of fine-tuning user interfaces and layouts.
8.  **Centralized Utilities:** Imports like `makeAPICall`, `updateBreadcrumbs`, `deepEqualAndDiff`, `formatAmount`, and helper components (`RenderField`, `InfoComponent`) suggest a well-structured codebase with reusable utilities and components.

## 14:51:48
The recent code changes primarily focus on enhancing the merchant dashboard's UI customization and order management features, alongside infrastructure updates for deployment and monitoring.

### File-Specific Updates:

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx` (Timestamp: 16/11/2025, 13:10:34)**
    This file saw significant updates to the brand page UI customization. It now supports robust logo uploads, including file type/size validation, cleaning images with canvas, generating presigned AWS URLs for secure uploads, and displaying the uploaded logo. The component also integrates a color picker for theme customization, fetches merchant logo and primary color from configuration, and dispatches updates to the Redux store.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx` (Timestamp: 17/11/2025, 16:22:51)**
    A minor update was made to the `ProductSearch` component, introducing a `topUpGift` prop. When enabled, this feature allows users to specify a "Freebie Price" for selected products, enhancing the flexibility of discount configurations.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx` (Timestamp: 17/11/2025, 16:23:04)**
    The order details page received substantial enhancements. Key changes include improved currency formatting with dynamic symbols, refined refund processing that merges repeated attempts and updates statuses (e.g., "Completed," "Failed," "Initiated"), and dynamic logic to determine if an order can be edited based on applied rewards or discount types. Calculations for total discounts, taxes, shipping, COD charges, gift cards, and rewards have been made more comprehensive by incorporating a wider range of price breakup values.

*   **`/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs` (Timestamp: 18/11/2025, 00:45:31)**
    This file underwent significant infrastructure changes. A Content Security Policy (CSP) was added to enhance security. The Freshchat widget was integrated for customer support. SystemJS import maps were updated to include a new `@gokwik/kwikcomm` module across `dev`, `qa`, and `sandbox` environments. Crucially, New Relic browser monitoring and Microsoft Clarity tracking scripts were integrated for the `production` environment to enable performance monitoring and analytics.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx` (Timestamps: 18/11/2025, 00:49:40, 00:50:14, 00:58:39)**
    This file, appearing in the log multiple times without functional changes between entries, introduces a comprehensive interface for managing automatic free gift rules. Merchants can define rules based on criteria like cart value, quantity, specific products or collections, and sales channels. The UI provides a form for rule creation/editing and a table to view, enable/disable, and delete rules, including selecting free gift products and setting their quantity/price.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx` (Timestamp: 18/11/2025, 23:42:52)**
    A new component, `CustomizeUiFields`, was introduced to provide granular UI customization for the order confirmation page. It allows merchants to enable/disable various sections (e.g., Brand Logo, Dynamic Banners, Trust Banner, Order Details, Customer Information, Support & Communication), modify their textual content, set background and text colors using a `ColorPickerHelper`, and reorder these sections via drag-and-drop functionality.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx` (Timestamps: 19/11/2025, 21:10:01, 21:11:54, 21:12:22, 21:12:29)**
    This is the main entry point for the Order Confirmation Page settings. It introduces the ability to enable a custom confirmation page. The page features an informational alert about redirecting from Shopify's page, a form to configure the custom page's content and appearance (utilizing `MainSection` which likely wraps `CustomizeUiFields`), and a preview panel (`OrderConfirmationPreview`). The layout experienced minor, rapid adjustments over a few minutes, specifically in the flex widths of the configuration and preview columns, with the final state at 21:12:29 providing a wider configuration panel.

### Patterns and Recurring Elements:

*   **Component-Based UI Development:** The codebase heavily relies on React components and `gokwik-ui-kit` (Ant Design-based) for building modular and interactive user interfaces.
*   **State and Form Management:** Extensive use of React hooks like `useState`, `useEffect`, `useMemo`, and Ant Design's `Form.useForm` and `Form.useWatch` indicates a sophisticated approach to managing local and form-specific state, enabling dynamic UI updates.
*   **Centralized Configuration:** The `useMerchantConfigApi` hook is a recurring element, suggesting a standardized way to interact with merchant-specific settings, allowing for consistent data fetching and saving across different customization features.
*   **API Integration:** API calls using `makeAPICall` and `makeAWSPutCall` are fundamental, often coupled with environment variables (`process.env.REACT_APP_BASE_URL`) and predefined endpoints, for data persistence and external service interactions.
*   **Navigation and Context:** `updateBreadcrumbs` is consistently used to maintain navigational context across different pages.
*   **Layout and Styling:** Frequent use of `Row`, `Col`, `Card` components from `gokwik-ui-kit` along with Tailwind CSS-like utility classes for responsive and consistent layout and styling.
*   **Customization Focus:** A strong pattern emerges around building detailed customization UIs for merchants, allowing them to tailor branding, promotional offers (free gifts), and the post-purchase experience (order confirmation page).

## 15:51:43
The recent code changes, all occurring in mid-November 2025, primarily focus on enhancing the "checkout-dashboard-ui" application, with a minor update to "dashboard-ui-configuration." A recurring pattern observed is the use of `gokwik-ui-kit` (likely Ant Design-based components) for UI, `Form.useForm()` for state management, and custom helper components like `RenderField` and `InfoComponent`. Several files show multiple, near-identical saves within minutes, indicating rapid development or minor UI tweaks.

Here's a breakdown of key updates by file:

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx`** (Timestamp: 16/11/2025, 13:10:34)
    This file received significant updates to its brand customization capabilities. It now includes enhanced logo management with functions for validating image types and sizes, fetching pre-signed URLs, and uploading to AWS S3. A `ColorPicker` component was introduced for theme color selection, and the `onFinish` logic was updated to save both logo data and primary color CSS rules. The UI was structured with `Card`, `Row`, and `Col` for an organized display of customization options.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx`** (Timestamp: 17/11/2025, 16:22:51)
    The `ProductSearch` component was extended with new props and functionalities, making it more versatile for discount configurations. Key additions include options to hide the search input, filter products for "agent-led" scenarios based on tags, and handle "top-up gift" pricing. Logic for managing collection-specific quantities with validation was also implemented. The `parseResponse` and `fetchData` functions were updated to accommodate these new filtering and collation requirements.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx`** (Timestamp: 17/11/2025, 16:23:04)
    This file underwent extensive refactoring to improve order details display and refund management. New helper functions (`formatCurrency`, `formatAmountWithCurrency`) ensure consistent currency formatting. Status mappings were added for better visual representation of order and refund states. A `mergeRepeatedRefunds` function was introduced to consolidate multiple refund attempts. The component also gained logic to disable order editing under specific conditions (e.g., when Twid rewards or loyalty points are applied) and to calculate detailed price breakups including discounts, taxes, shipping, and gift cards. Masked customer contact information is now handled.

*   **`/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs`** (Timestamp: 18/11/2025, 00:45:31)
    This configuration file was updated to integrate third-party analytics and performance monitoring tools: Microsoft Clarity and the New Relic Browser Agent. It also included minor enhancements such as adding a favicon and setting the document title. The `Content-Security-Policy` was adjusted to allow connections to `wss://*.gokwik.io`, and `@gokwik/kwikcomm` was added to the module import maps for `dev` and `qa` environments.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx`** (Timestamps: 18/11/2025, 00:49:40, 18/11/2025, 00:50:14, 18/11/2025, 00:58:39)
    This file, which saw three almost identical updates, implements a "Free Gift" settings page. It provides a comprehensive form for defining free gift rules, covering aspects like rule name, sales channels (with conditional disabling for "Agent led"), purchase requirements (cart value or quantity), minimum/maximum values, and applicability to all products, specific products, or collections. Merchants can select free gift products, specify quantities and prices, and choose between automatic addition or customer selection with a limit. A table displays active rules with toggles for enabling/disabling and actions for editing or deleting them.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx`** (Timestamp: 18/11/2025, 23:42:52)
    A new `CustomizeUiFields` component was introduced to manage various UI customization options for the order confirmation page. It organizes settings into collapsible panels for Brand Logo, Dynamic Banners, TrustBanner, Order Details, Customer Information, and Support & Communication. Each section features enable/disable switches, specific input fields (e.g., confirmation messages, heading texts, button links), and color pickers for background and text colors. The component also supports drag-and-drop functionality for reordering these customization sections.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx`** (Timestamps: 19/11/2025, 21:10:01, 19/11/2025, 21:11:54, 19/11/2025, 21:12:22, 19/11/2025, 21:12:29)
    This file defines the main Order Confirmation Page settings. It allows merchants to enable a custom confirmation page and configure its appearance. The page features a two-column layout: one for the configuration form (`MainSection`) and another for a live preview (`OrderConfirmationPreview`). The multiple updates to this file primarily involved minor adjustments to the `flex` properties of the layout columns, likely fine-tuning the responsiveness of the settings interface. Form validation logic was also present, with specific exclusions for `trust_text` and `trust_tag` fields.

## 16:51:53
**/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx** (Timestamp: 16/11/2025, 13:10:34)
This file defines a React component (`BrandPage`) for customizing a merchant's UI branding. Key functionalities include:
*   **Logo Management:** Allows uploading a brand logo (JPEG, PNG, SVG, max 2MB), validates file type and size, processes the image using `cleanImageWithCanvas`, uploads it to AWS via a presigned URL (`fetchUploadedLogoURL`, `makeAWSPutCall`), and updates the form and Redux store. It also fetches existing logo URLs.
*   **Theme Color Customization:** Provides a `ColorPicketComponent` to set the primary theme color.
*   **Configuration Saving:** Utilizes `useMerchantConfigApi` to save the logo path and primary color as part of the merchant's custom configuration.
*   **UI Elements:** Employs `gokwik-ui-kit` components like `Form`, `Upload`, `Button`, `Card`, and `ColorPicker`, along with an `InfoComponent` for page context. The "Save Changes" button is enabled when form values change.

**/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx** (Timestamp: 17/11/2025, 16:22:51)
This component (`ProductSearch`) provides a versatile search and selection interface for Shopify products or collections, typically used in discount or free gift configurations.
*   **Search Functionality:** Fetches products or collections using `fetchShopifyCollectionsOrProducts` with support for debounced searching and infinite scrolling via an Intersection Observer.
*   **Item Management:** Allows adding/removing selected items, managing quantities for product variants, and handling collection-specific quantities with validation.
*   **Conditional Rendering:** Highly configurable via props (`searchType`, `hideButton`, `showQuantity`, `collateProducts`, `isAgentLed`, `topUpGift`, etc.) to adapt to different use cases.
*   **UI Elements:** Integrates `gokwik-ui-kit` components such as `Input`, `SearchOutlined`, `Modal`, `Button`, `InputNumber`, and various icons to display search results and selected items. Products can be filtered for "agent-led" scenarios.

**/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx** (Timestamp: 17/11/2025, 16:23:04)
This file implements the `OrderDetails` page, displaying comprehensive information for a specific order.
*   **Order Data Fetching:** Retrieves order details using `makeAPICall` based on order ID, creation timestamp, or merchant order ID, with special handling for internal team access or COD token.
*   **Refund Management:** Merges repeated refund attempts (`mergeRepeatedRefunds`) and calculates the total refundable amount, determining the state of the refund button. A `RefundDrawer` component is integrated for processing refunds.
*   **Price Breakups:** Uses helper functions (`DiscountBreakupsData`, `TaxBreakupData`, etc.) to display detailed price breakdowns including discounts, taxes, shipping, COD charges, gift cards, and rewards.
*   **UI Elements:** Leverages `gokwik-ui-kit` components like `Button`, `Table`, `Tabs`, `Tag`, `Tooltip`, and icons to structure the order details, transactions, and refunds.
*   **Currency Handling:** Dynamically sets the global currency symbol based on order data or merchant details.
*   **Conditional Features:** Shows RTO (Return To Origin) actions and scores based on merchant configuration, and disables order editing if Twid rewards or Loyalty Points are applied.
*   **User Details:** Fetches merchant and user configurations and permissions.

**/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs** (Timestamp: 18/11/2025, 00:45:31)
This is the main HTML template for the `Gokwik Dashboard`, part of a single-spa microfrontend architecture.
*   **HTML Structure:** Sets up the basic HTML boilerplate, including meta tags for charset, viewport, and a Content Security Policy (CSP).
*   **Microfrontend Loading:** Uses `systemjs-importmap` to define and load shared dependencies (React, React-DOM, single-spa) and various `@gokwik` microfrontends (e.g., `@gokwik/configuration`, `@gokwik/utilities`, `@gokwik/checkout`).
*   **Environment-Specific Loading:** The import map URLs for microfrontends are conditional based on the `deployedEnv` (local, dev, qa, sandbox, production), allowing different environments to load their respective builds.
*   **Analytics Integration:** Includes scripts for `New Relic` performance monitoring and `Clarity` analytics in the production environment.

**/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx** (Timestamp: 18/11/2025, 00:49:40, 18/11/2025, 00:50:14, 18/11/2025, 00:58:39)
These three log entries for `freeGift.tsx` show identical code content, indicating no functional changes were made across these timestamps, possibly only minor saves or reformatting.
The file defines the `FreeGift` component for configuring automatic free gift rules for merchants.
*   **Rule Management:** Allows creating, editing, and deleting free gift rules. Rules are managed in a `newGift` state array.
*   **Form Definition:** Uses an extensive `fields` array to dynamically render form inputs (`RenderField` helper) for defining rule name, sales channels (app, web, agent-led), purchase requirements (cart value, quantity, min/max values), applicability (all products, specific products/collections), free gift product selection, quantity, price, and gift addition method (auto or selection).
*   **Product/Collection Selection:** Integrates the `ProductSearch` component for selecting specific products or collections that trigger the gift or are given as gifts.
*   **Configuration Saving:** Employs `useMerchantConfigApi` (with `patch: true`) to persist free gift configurations.
*   **UI Elements:** Uses `gokwik-ui-kit` components like `Form`, `Card`, `Drawer` (for new rules), `Table` (to list rules), `Dropdown` (for actions), and `Switch` (to enable/disable rules).
*   **Breadcrumbs:** Updates the navigation breadcrumbs for the "Free Gift Settings" page.

**/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx** (Timestamp: 18/11/2025, 23:42:52)
This component (`CustomizeUiFields`) provides collapsible sections for configuring various parts of the Order Confirmation Page UI.
*   **Modular Customization:** Consists of multiple collapsible panels, each dedicated to a specific section: Brand Logo, Dynamic Banners, Trust Banner, Order Details, Customer Information, and Support & Communication.
*   **Dynamic Fields:** Each section uses an array of field definitions (`orderDetailFields`, `customerInformationFields`, `supportDetailFields`) rendered by a `RenderField` helper. Fields include switches to enable/disable sections, input fields for text, and `ColorPickerHelper` for background and text color customization.
*   **Drag-and-Drop:** Implements drag-and-drop functionality to allow users to reorder the collapsible customization sections, dynamically updating the form's data structure.
*   **UI Elements:** Utilizes `gokwik-ui-kit` `Collapse`, `Switch`, `Card`, `Form`, and `HolderOutlined` for its structure and interactivity. It also integrates specialized components like `LogoPage` and `TrustBadgeForm`.

**/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx** (Timestamps: 19/11/2025, 21:10:01, 19/11/2025, 21:11:54, 19/11/2025, 21:12:22, 19/11/2025, 21:12:29)
This file defines the main page for configuring the Order Confirmation Page.
*   **Core Functionality:** Enables or disables a custom order confirmation page, with an `Alert` providing context.
*   **Configuration Form:** Houses the main customization forms within a `MainSection` component (likely integrating `CustomizeUiFields`). Form changes enable a "Save Changes" button, and form submission includes validation with specific exclusions.
*   **Live Preview:** Presents a two-column layout: the left column contains the customization forms, and the right column displays a live preview using the `OrderConfirmationPreview` component.
*   **UI Adjustments:** Between 21:10:01 and 21:12:29 on 19/11/2025, there were several rapid changes and reverts to the `flex` properties of the `Col` components, indicating active UI layout adjustments to balance the width of the configuration panel and the preview panel. The final change at 21:12:29 set the configuration column to be wider (`300px`) while maintaining the preview column at its wider size (`500px`).
*   **UI Elements:** Uses `gokwik-ui-kit` `Row`, `Col`, `Card`, `Form`, `Button`, and `Alert`, along with an `InfoComponent` for page details.

**Overall Patterns and Key Themes:**
*   **React-based Development with `gokwik-ui-kit`:** All front-end code is written in React and heavily relies on a custom `gokwik-ui-kit` for consistent UI elements.
*   **Form-Driven Configurations:** Many pages are built around `Form` components, allowing merchants to customize various aspects of their checkout and post-purchase experience through structured inputs, switches, and color pickers.
*   **Modular Architecture:** The application is modularized into pages and reusable components, demonstrated by the use of `ProductSearch`, `ColorPickerHelper`, `CollapseFields`, etc.
*   **API Integration and State Management:** `makeAPICall`, `useMerchantConfigApi`, and Redux (via `useSelector`, `useAppDispatch`) are standard for interacting with backend services and managing application state.
*   **User Experience Focus:** Features like breadcrumbs, info components, tooltips, and live previews (in Order Confirmation) are used to enhance the user experience for merchants configuring their settings.
*   **Active Development:** The timestamps, particularly the close succession of identical code in `freeGift.tsx` and the rapid UI layout tweaks in `orderConfirmation/index.tsx`, suggest a period of active development and iterative design adjustments.

## 17:51:49
The code changes primarily focus on developing and refining UI customization and order management features within a dashboard application, likely for a merchant-facing portal.

### File-Specific Updates:

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx` (Timestamp: 16/11/2025, 13:10:34)**
    *   This component manages brand customization settings, specifically for logo upload and primary color selection for the checkout UI.
    *   It includes functionality to fetch and display the existing merchant logo, validate and upload new logos (handling image cleaning, presigned S3 URLs, and direct S3 put calls), and update both the logo path in Redux and custom CSS rules in the merchant configuration.
    *   Form fields for logo upload and a color picker component are utilized, with a "Save Changes" button enabled when modifications are detected.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx` (Timestamp: 17/11/2025, 16:22:51)**
    *   This component provides a robust search interface for products or collections, typically used in the context of discount or free gift rules.
    *   Key features include searching with debouncing, infinite scrolling for results, a modal for selection, and options to manage quantities of selected items.
    *   It supports different search types (`products` or `collections`) and specific filtering for "agent-led" items based on product tags. Logic for collating product variants and handling gift prices is also present.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx` (Timestamp: 17/11/2025, 16:23:04)**
    *   This page displays comprehensive details for a specific order.
    *   It fetches and renders order information, including price breakdowns (discounts, taxes, shipping, gift cards, rewards), transaction history, and refund data.
    *   A significant update is the `mergeRepeatedRefunds` function to consolidate multiple refund attempts.
    *   The component dynamically sets the currency symbol, manages the state of a refund button based on transaction statuses, and displays masked customer contact details. It also sets an edit title based on applied rewards or discount types.

*   **`/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs` (Timestamp: 18/11/2025, 00:45:31)**
    *   This is the main EJS template for the dashboard's `index.html`.
    *   It sets up the core HTML structure, meta tags (including a detailed Content Security Policy), and favicon.
    *   Crucially, it configures Single-SPA import maps, dynamically loading various `@gokwik` microfrontend applications from different URLs based on the deployment environment (local, dev, qa, sandbox, production).
    *   Third-party integrations like Freshchat Messenger and New Relic RUM monitoring are also initialized, with New Relic specifically for the production environment.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx` (Timestamps: 18/11/2025, 00:49:40; 18/11/2025, 00:50:14; 18/11/2025, 00:58:39)**
    *   All three entries for this file show identical code content, indicating no functional changes across these specific saves, likely due to automated saves or minor non-code modifications.
    *   This component allows merchants to configure and manage "free gift" rules.
    *   Users can define rule names, sales channels, purchase requirements (cart value/quantity), minimum/maximum values, and specify whether the gift applies to all products, specific products, or collections.
    *   It integrates the `ProductSearch` component for selecting the free gift product(s) and allows choosing between 'Auto' or 'Selection' methods for gift addition, with a configurable selection limit.
    *   A table displays existing rules, offering options to enable/disable them and perform edit/delete actions.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx` (Timestamp: 18/11/2025, 23:42:52)**
    *   This `CustomizeUiFields` component organizes various customization options for an order confirmation page into collapsible sections.
    *   It allows merchants to customize elements like brand logo, dynamic banners, trust badges, order details (status, EDD, confirmation message), customer information (delivery/billing address, contact info), and support/communication details.
    *   Each section includes form fields for text, links, and `ColorPickerHelper` for background and text colors, along with a switch to enable/disable the entire section.
    *   A notable feature is the implementation of drag-and-drop functionality to reorder these collapsible customization sections.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx` (Timestamps: 19/11/2025, 21:10:01; 19/11/2025, 21:11:54; 19/11/2025, 21:12:22; 19/11/2025, 21:12:29)**
    *   These multiple timestamps for the same file indicate minor layout adjustments, specifically changes to the `flex` properties of `Col` components, likely for optimizing the responsive layout of the customization page and its preview. The underlying logic remains consistent across these saves.
    *   The `OrderConfirmationPage` provides a central interface to enable a custom order confirmation page and manage its content.
    *   It features an alert about redirecting customers from Shopify's page, a form with an "Enable Custom Order Confirmation Page" switch, and a "Save Changes" button that is activated upon form modifications.
    *   The page integrates `MainSection` (where detailed customization fields like `CustomizeUiFields` would reside) and an `OrderConfirmationPreview` component for real-time visualization of changes.

### Patterns and Recurring Elements:

*   **UI Customization Focus:** A dominant theme across `brandPage.tsx`, `collapseFields.tsx`, and `orderConfirmation/index.tsx` is the extensive UI customization capabilities offered to merchants for the checkout and post-purchase experience (logos, colors, banners, page sections).
*   **Form-Driven UI:** The `gokwik-ui-kit`'s `Form` component (likely Ant Design based) is central to most UI settings pages, leveraging `useForm`, `useWatch`, and methods like `setFieldsValue` and `validateFields` for comprehensive form management and validation.
*   **API Interactions and Merchant Configuration:** `makeAPICall` and the custom `useMerchantConfigApi` hook are consistently used for fetching and persisting merchant-specific configurations and data, highlighting a pattern of interacting with a backend API for dynamic settings.
*   **State Management:** React hooks (`useState`, `useEffect`, `useMemo`, `useCallback`) are frequently employed for component-level state, complemented by Redux (`useSelector`, `useAppDispatch`) for global state, such as merchant details and configuration.
*   **Microfrontend Architecture:** The presence of `index.ejs` with `systemjs-importmap` and references to `@gokwik/*` modules confirms the application uses a Single-SPA microfrontend architecture, enabling modular development and deployment.
*   **Recent Development:** All timestamps fall within a short period (November 16-19, 2025), with several files showing multiple saves within minutes, indicating active development, minor adjustments, and frequent iterative changes to the dashboard's features.

## 18:51:43
The provided logs indicate recent development activity primarily focused on the `checkout-dashboard-ui` repository, with some changes in `dashboard-ui-configuration`. The changes revolve around UI customization, order management, and new feature implementation (Free Gift).

Here's a breakdown of the key information:

**File-Specific Updates:**

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx`** (Timestamp: 16/11/2025, 13:10:34)
    *   This file is responsible for the Brand Page UI customization.
    *   **Key Changes:**
        *   Enhanced logo upload functionality with validation for file types (JPEG, PNG, SVG) and size (under 2MB).
        *   Introduced `cleanImageWithCanvas` for image processing during upload.
        *   Added API calls (`downloadLogo`, `presingedLogoUrl`, `updateMerchant`) for handling logo storage and updates on AWS.
        *   Implemented `ColorPicketComponent` for theme color customization.
        *   The form `onFinish` logic now handles both logo image updates and saving general brand configuration, including `cssRules.primaryColor`.
        *   The `isVisible` state is used to enable/disable the "Save Changes" button, becoming `false` on any value change in the form.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx`** (Timestamp: 17/11/2025, 16:22:51)
    *   This component provides product and collection search functionality, likely for discount or gift configurations.
    *   **Key Changes:**
        *   Added support for `topUpGift` and `collectionSpecificData` props, indicating new features related to gift price handling and collection quantity limits.
        *   Introduced `isEditingSpecificCollection` state, hinting at UI for editing collection-specific quantities.
        *   New `handleGiftPrice` function to update the `offered_price` for gift products.
        *   New `handleQuantityChange` function to manage quantities for collections, including validation against `collectionMinimumPurchangeQuantity`.
        *   Added `handleCloseAllInput` to reset editing state and collection quantities.
        *   The `parseResponse` function now handles `collateProducts` for product search results, grouping variants.
        *   `fetchData` and `useEffect` hooks manage API calls for product/collection search with pagination and debouncing for `searchedText`.
        *   Filtering for "no-agent" tags in `isAgentLed` context has been added.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx`** (Timestamp: 17/11/2025, 16:23:04)
    *   This file displays the details of a specific order.
    *   **Key Changes:**
        *   Enhanced currency formatting with `formatAmountWithCurrency` and `setCurrencySymbol` to handle various global currencies.
        *   Introduced `statusMappingForColors` and `statusMappingForTag` for consistent UI representation of order and refund statuses.
        *   Implemented `mergeRepeatedRefunds` to aggregate multiple refund attempts for a single `gokwik_rid` into a single, more descriptive entry.
        *   Added logic to determine `order_failure_reason`.
        *   Detailed calculation of `total_discount`, `tax`, `shipping_and_cod_charges`, and `gift_card_and_rewards` in the `orderData` state.
        *   Improved refund button state management (`refundBtnState`) to correctly disable/enable it based on refundable amount and transaction statuses.
        *   Added logic to `setEditTitle` and `setDisableEdit` based on rewards, GWP discounts, or loyalty points applied to an order.
        *   Introduced a check for `codToken` when fetching order details, likely for a specific COD flow.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx`** (Timestamps: 18/11/2025, 00:49:40, 18/11/2025, 00:50:14, 18/11/2025, 00:58:39)
    *   This component manages the configuration of "Free Gift" rules.
    *   **Key Changes (consistent across these timestamps):**
        *   Introduction of `newRules`, `newGift`, `editRuleId`, and `isChanged` states for managing free gift rules.
        *   Integration with `useMerchantConfigApi` for saving and refetching configuration.
        *   Extensive form fields (`fields` array) for defining free gift rules, covering:
            *   Rule name, sales channels (App, Web, Agent led - with `shopify_agent` disabled if `applicationMethod` is not 'auto').
            *   Purchase requirements (Cart value, Quantity) with min/max value validation.
            *   Applicability on 'All Products', 'Specific Products', or 'Specific Collections' with dynamic `hideControlInput`.
            *   Selection of free gift product(s) using `ProductSearch`.
            *   Free gift quantity and price.
            *   Application method ('Auto' or 'Selection') and `selection_limit`.
        *   `columns` definition for displaying configured free gift rules in a table, including `Switch` for status and `Dropdown` for edit/delete actions.
        *   `handleEdit`, `handleDelete`, `handleAddFreeGiftProduct`, `handleRemoveFreeGiftProduct`, `handleAddApplicableOnItems` functions for managing rules and their associated products/collections.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx`** (Timestamp: 18/11/2025, 23:42:52)
    *   This component defines collapsible sections for customizing the order confirmation UI.
    *   **Key Changes:**
        *   Structured UI customization options into collapsible sections: 'Brand Logo Customization', 'Dynamic Banners', 'TrustBanner', 'Order Details', 'Customer Information', and 'Support & Communication'.
        *   Each section includes a `Switch` to enable/disable the feature.
        *   Added `ColorPickerHelper` for customizing background and text colors for 'Order Status & EDD', 'Billing Summary', 'Customer Details', and 'Support Details' sections.
        *   Included forms for `LogoPage`, `RenderEditorFunction` (for banners), and `TrustBadgeForm`.
        *   Implemented drag-and-drop reordering functionality for the collapsible items, affecting the `customize` form field.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx`** (Timestamps: 19/11/2025, 21:10:01, 19/11/2025, 21:11:54, 19/11/2025, 21:12:22, 19/11/2025, 21:12:29)
    *   This page serves as the main configuration interface for the order confirmation page.
    *   **Key Changes (across these timestamps):**
        *   Consistently sets up a two-column layout for configuration fields and a live preview (`OrderConfirmationPreview`).
        *   Includes an `InfoComponent` for context and a link to documentation.
        *   `Form` is used for managing settings, with `onValuesChange` to set `setIsChanged(true)` for enabling the "Save Changes" button.
        *   `handleFormSubmit` includes logic to validate fields, specifically excluding `trust_text` and `trust_tag` from validation.
        *   Initial configuration fields include a switch to 'Enable Custom Order Confirmation Page' and an `Alert` providing context about redirecting customers from Shopify.
        *   Integrates `MainSection` (which likely includes the `collapseFields` component) for detailed UI customization.
        *   **Specific Layout Adjustments:** There are minor adjustments to the `flex` property of the `Col` components, oscillating between `flex='1 1 200px'` and `flex='1 1 300px'` for the configuration column, and `flex='0 1 500px'` and `flex='0 1 300px'` for the preview column, indicating UI layout refinements to better balance the display of form inputs and the preview.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/shipping/shippingBasedData.tsx`** (Timestamps: 20/11/2025, 18:44:34, 20/11/2025, 18:44:55, 20/11/2025, 18:49:44, 20/11/2025, 18:49:50)
    *   This component manages product-based shipping rules.
    *   **Key Changes (consistent across these timestamps):**
        *   `processProductBasedShippingData` is a function (not a component itself) that returns state, form fields, and column data related to shipping rules.
        *   `tableData` is derived from existing shipping rules, mapping product-based rules to a displayable format.
        *   `dataMapperForItems` helps format selected products/collections for display.
        *   `selectedOptions` memoizes available shipping IDs for mapping.
        *   `itemColumnData` defines the columns for displaying added products/collections with image, title, variant count, type, and a delete button.
        *   `fields` array defines the form structure for creating/editing product-based shipping rules, including:
            *   Rule name and price (with a `onKeyPress` validator to allow only numbers and dots in the latest timestamp).
            *   Mapping to an existing shipping ID (using a `select` with `selectedOptions`).
            *   Shipping calculation method (Override or Add onto base).
            *   Toggles for `price_multiplier` and `combine_with_weight_based`.
            *   Integration of `ProductSearch` components to add specific products or collections to a rule.
            *   Logic to handle adding/removing product variants and collection IDs to form fields and `itemsData` state, with error messages for duplicate items.
        *   The price input type changed from `inputNumber` to `input` with a custom `onKeyPress` validator to allow decimal numbers.

**Timestamps of Significant Changes:**

*   **16/11/2025, 13:10:34:** Major update to Brand Page customization, including logo upload, API integration for image handling, and theme color picker.
*   **17/11/2025, 16:22:51:** Introduction of new features related to gift price and collection quantity management in the `ProductSearch` component.
*   **17/11/2025, 16:23:04:** Significant enhancements to Order Details, focusing on currency formatting, refund aggregation, and dynamic refund button state.
*   **18/11/2025, 00:49:40 - 18/11/2025, 00:58:39:** Consistent updates across three timestamps for the Free Gift page, indicating continuous work on refining the rules and UI for automatic free gifts.
*   **18/11/2025, 23:42:52:** Comprehensive update to order confirmation page UI customization, introducing collapsible sections and drag-and-drop reordering.
*   **19/11/2025, 21:10:01 - 19/11/2025, 21:12:29:** Minor UI layout adjustments on the Order Confirmation page, specifically concerning the `flex` proportions of the configuration and preview columns.
*   **20/11/2025, 18:44:34 - 20/11/2025, 18:49:50:** Iterative changes to the `shippingBasedData` component, refining input types (e.g., `inputNumber` to `input` with `onKeyPress` for price), and logic for adding/removing products/collections.

**Patterns and Recurring Elements:**

*   **Form Management:** React Hook Form (`Form.useForm()`, `Form.useWatch()`, `form.setFieldValue()`, `form.getFieldsValue()`, `form.validateFields()`) is consistently used across `BrandPage`, `FreeGift`, `OrderConfirmationPage`, and `shippingBasedData` for managing complex form states and validations.
*   **UI Component Library:** `gokwik-ui-kit` components (Button, Col, Row, Card, Upload, Form, message, Alert, ColorPicker, Input, InputNumber, Checkbox, Radio, Switch, Table, Dropdown, Tooltip, Collapse) are heavily used, indicating a standardized UI framework.
*   **API Interactions:** Common patterns of `makeAPICall`, `makeAWSPutCall` are observed for interacting with backend services and AWS S3, often involving `APIEndPoints` constants.
*   **Merchant Configuration:** The `useMerchantConfigApi` hook is a recurring element in settings pages (`BrandPage`, `FreeGift`) for fetching and saving merchant-specific configurations, often with `patch: true` for partial updates.
*   **Breadcrumbs:** `updateBreadcrumbs` from `@gokwik/utilities` is used to maintain navigation context in several pages.
*   **Product/Collection Selection:** The `ProductSearch` component is reused in `FreeGift` and `shippingBasedData` for selecting products or collections, highlighting a common need for this functionality across different settings.
*   **Dynamic UI based on state/props:** Many form fields or UI elements have `hidden` or `disabled` properties that dynamically change based on other form values or component state (e.g., `applicationMethod` in FreeGift, `customizeUiData.order_details.order_status_edd.enabled` in `collapseFields`).
*   **Date Formatting and Currency Handling:** Specific attention is paid to displaying dates and currency amounts correctly, with helper functions like `formatAmount`, `setCurrencySymbol`, and `formatAmountWithCurrency`.
*   **Input Validation:** Form fields frequently include `rules` for validation (e.g., `required`, `message`, custom `validator` functions), ensuring data integrity.
*   **Environment-Specific Configuration:** The `.env` file updates show switching between `sandbox` and `qa` environments for API base URLs, indicating routine deployment or testing activities. The `index.ejs` file in `dashboard-ui-configuration` also shows `systemjs-importmap` configurations for different `deployedEnv` (local, dev, qa, sandbox, production), highlighting a micro-frontend architecture and environment-specific dependency loading.
*   **New Relic Integration:** The `index.ejs` file includes extensive New Relic RUM (Real User Monitoring) script, indicating a focus on performance monitoring and error tracking across different environments.

## 21:51:52
The code changes primarily focus on enhancing and refining dashboard functionalities related to UI customization, order management, free gift configurations, and shipping rules. There are also updates to environment and deployment configurations.

**File-Specific Updates:**

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx` (Timestamp: 16/11/2025, 13:10:34)**
    This file defines the `BrandPage` component, allowing merchants to customize their checkout UI. Key updates include:
    *   **Logo Upload:** Implemented functionality for uploading a brand logo, including client-side validation for image type (JPEG, PNG, SVG) and size (under 2MB), image cleaning via canvas, fetching presigned AWS S3 URLs, and uploading the image.
    *   **Theme Customization:** Integration of a `ColorPicketComponent` to allow setting a primary theme color for the checkout UI.
    *   **Configuration Saving:** Logic to save brand-related configurations (logo path and primary color) to the merchant's custom settings via an API call.
    *   **Dynamic UI:** Uses `Form.useWatch` to react to form changes, enabling/disabling the "Save Changes" button dynamically.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx` (Timestamp: 17/11/2025, 16:22:51)**
    This component provides a versatile search interface for products or collections within a modal. Updates include:
    *   **Search Type Flexibility:** Configurable `searchType` prop to switch between searching for products and collections.
    *   **Infinite Scrolling:** Utilizes `useIntersectionObserver` for lazy loading search results as the user scrolls.
    *   **Product/Collection Selection:** Enhanced logic for adding and removing items, supporting product variants and collating products.
    *   **Conditional Filtering:** Added filtering for `isAgentLed` scenarios, excluding products tagged "no-agent".
    *   **Quantity Management:** Introduced functionality for managing quantities of selected items, including specific logic for collection quantities and minimum purchase requirements.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx` (Timestamp: 17/11/2025, 16:23:04)**
    This file displays detailed information for individual orders. Significant updates include:
    *   **Comprehensive Order Data Display:** Fetches and displays various order details, including price breakups, transactions, and refunds.
    *   **Refund Logic:** Improved `mergeRepeatedRefunds` function to aggregate refund attempts and determine the final status. Calculates and displays `refundableAmount` and dynamically enables/disables the refund button based on transaction statuses.
    *   **Currency Formatting:** Introduced a global `setCurrencySymbol` and a custom `formatAmountWithCurrency` helper to ensure correct currency symbol display.
    *   **Conditional Editing:** Sets `disableEdit` state based on the presence of Twid rewards, specific GWP discount types, or loyalty points, preventing edits in certain scenarios.
    *   **Order Failure Reasons:** Integration of `findOrderFailureReason` to identify and display reasons for order failures.

*   **`/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs` (Timestamp: 18/11/2025, 00:45:31 and 20/11/2025, 18:37:48)**
    This EJS template configures the single-spa application's module imports.
    *   **Environment-Specific Microfrontend URLs:** Updated the `systemjs-importmap` to load different versions of `@gokwik` microfrontends (e.g., `configuration`, `utilities`, `dashboard`, `checkout`, `payment`, `kwikpass`, `rto`, `kwikship`, `ellora`, `checkout-platform`, `shopify-app`, `kwikcomm`) based on the `deployedEnv` (local, dev, qa, sandbox, production).
    *   **Local Environment Updates (20/11/2025):** Specifically, the `isLocal` configuration block was updated to point `@gokwik/utilities` and `@gokwik/dashboard` to `https://qa-dashboard.dev.gokwik.in/...` instead of `https://sandbox-dashboard.dev.gokwik.in/...`, indicating a change in the local development dependencies.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx` (Timestamps: 18/11/2025, 00:49:40, 00:50:14, 00:58:39)**
    This component manages automatic free gift rules. While multiple timestamps are logged, the code content remained identical, indicating no functional changes across these specific logs.
    *   **Rule Management Interface:** Provides a form to define free gift rules, including fields for name, sales channels (App, Web, Agent-led), purchase requirements (Cart value, Quantity), applicability (All Products, Specific Products, Specific Collections), free gift quantity and price, and application method (Auto, Selection).
    *   **Product/Collection Search Integration:** Uses the `ProductSearch` component for selecting specific free gift products or products/collections for applicability.
    *   **Rule Table:** Displays configured free gift rules in a table, allowing users to enable/disable, edit, or delete them.
    *   **Breadcrumbs Update:** Ensures the breadcrumbs navigation is updated to reflect "Free Gift Settings."

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx` (Timestamp: 18/11/2025, 23:42:52)**
    This component organizes customizable sections for the order confirmation page into collapsible panels.
    *   **Modular Customization:** Structures customization options (Brand Logo, Dynamic Banners, TrustBanner, Order Details, Customer Information, Support & Communication) within collapsible Ant Design components.
    *   **Section Control:** Each collapsible section has a `Switch` to enable/disable it, and fields are conditionally rendered based on the switch state.
    *   **Drag-and-Drop Reordering:** Implemented drag-and-drop functionality to allow users to reorder the sections on the order confirmation page.
    *   **Color Pickers:** Integrates `ColorPickerHelper` for customizing background and text colors within various order detail sections.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx` (Timestamps: 19/11/2025, 21:10:01, 21:11:54, 21:12:22, 21:12:29)**
    This page serves as the main interface for configuring the custom order confirmation page.
    *   **Enable/Disable Feature:** A primary switch to activate or deactivate the custom order confirmation page, with an `Alert` providing contextual information.
    *   **Two-Column Layout:** Maintains a consistent two-column layout, with configuration forms on the left and an `OrderConfirmationPreview` on the right.
    *   **Layout Adjustments (19/11/2025):** There were several rapid changes and reverts to the `flex` property of the `Col` components, adjusting the width distribution between the settings and preview panes. The final adjustment (21:12:29) settled on `flex='1 1 300px'` for settings and `flex='0 1 500px'` for preview.
    *   **Form Submission:** `handleFormSubmit` includes logic to validate form fields, specifically excluding `trust_text` and `trust_tag` from validation.

*   **`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/shipping/shippingBasedData.tsx` (Timestamps: 20/11/2025, 18:44:34, 18:44:55, 18:49:44, 18:49:50)**
    This component manages product-based shipping rules.
    *   **Rule Definition:** Provides fields to define shipping rules, including name, price, mapping to an existing shipping ID, calculation method (override or add onto base), price multiplier, and combination with weight-based shipping.
    *   **Product/Collection Selection:** Integrates `ProductSearch` for adding specific products or collections to a shipping rule, with validation to prevent adding similar product variants multiple times.
    *   **"Rule price" Input Field Refinements:**
        *   **18:44:55:** Changed the input type for "Rule price" from `inputNumber` to `input`, suggesting a shift to a generic text input while still expecting numeric values.
        *   **18:49:44:** Added an `onKeyPress` event handler to the "Rule price" input to enforce numeric and decimal input only, preventing non-numeric characters from being typed. The code remained identical at 18:49:50.

**Recurring Patterns and Elements:**

*   **Gokwik-UI-Kit and Ant Design:** Consistent use of `gokwik-ui-kit` (likely built on Ant Design) components like `Form`, `Button`, `Card`, `Col`, `Row`, `Table`, `Input`, `Switch`, `Dropdown`, and `message` for building the dashboard UI.
*   **Form Management:** Widespread use of `Form.useForm()` and `Form.useWatch()` for managing form state, validations, and conditional rendering.
*   **API Interaction:** Frequent calls to `makeAPICall` and use of `APIEndPoints` from `@gokwik/utilities` for data fetching and submission.
*   **Merchant Configuration:** Reliance on `useMerchantConfigApi` hook and Redux selectors (`useSelector`) to fetch and save merchant-specific configurations, indicating a centralized configuration management system.
*   **Utility Components:** Re-use of custom utility components like `RenderField` for dynamic form rendering, `ProductSearch` for item selection, and `InfoComponent` for displaying contextual information.
*   **State Management:** Common use of `useState` and `useEffect` hooks for local component state and lifecycle management.
*   **Timestamp Pattern:** Most significant changes occurred around mid-November 2025 (16th, 17th, 18th, 19th, 20th), suggesting active development or a concentrated sprint during that period. The rapid sequence of identical or slightly altered log entries for `freeGift.tsx` and `orderConfirmation/index.tsx` indicates iterative saves or minor UI tweaks/reverts during a short span.

## 22:51:42
`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/customizeUI/brandPage.tsx` (Timestamp: 16/11/2025, 13:10:34)
This file implements a `BrandPage` component for customizing the checkout UI's brand elements. Key functionalities include:
*   **Logo Upload:** Allows merchants to upload their brand logo with validation for file type (JPG, PNG, SVG) and size (under 2MB). It uses `makeAPICall` and `makeAWSPutCall` for fetching pre-signed URLs and uploading images to AWS, and `cleanImageWithCanvas` for image processing.
*   **Logo Display:** Displays a preview of the uploaded logo or a placeholder image.
*   **Color Picker:** Integrates a `ColorPicketComponent` to allow selection of a primary theme color for the checkout UI.
*   **State Management:** Utilizes `useState`, `useEffect`, `useMemo`, `useSelector` (from Redux for merchant details), and `useAppDispatch` (for Redux actions like `updatedLogoData` and `updateBrandData`).
*   **Form Handling:** Uses Ant Design's `Form` component with `Form.useWatch` to monitor changes and enable/disable a "Save Changes" button.
*   **API Interactions:** Fetches existing logo URLs, pre-signed URLs for uploads, and updates merchant logo data and custom configuration (`saveConfig` from `useMerchantConfigApi`).
*   **UI Structure:** Uses `gokwik-ui-kit` components like `Button`, `Card`, `Row`, `Col`, `Upload`, `ColorPicker`, and `Alert` to build the settings page layout.

`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx` (Timestamp: 17/11/2025, 16:22:51)
This `ProductSearch` component facilitates searching and selecting products or collections for discount configurations.
*   **Search Functionality:** Supports searching for either 'products' or 'collections' with a debounced input for efficient API calls (`fetchShopifyCollectionsOrProducts`).
*   **Infinite Scrolling:** Implements infinite scrolling in the search modal using `useIntersectionObserver` to load more results as the user scrolls.
*   **Item Selection:** Allows users to add or remove selected products/collections, handling single products or collated products with variants.
*   **Quantity Management:** Includes functionality for adjusting quantities of selected items and handles specific logic for "Top Up Gift" pricing.
*   **Validation:** Incorporates validation for collection quantities against a minimum purchase quantity.
*   **UI/UX:** Features a modal for search results, tooltips, and various `gokwik-ui-kit` components like `Button`, `Input`, `Checkbox`, `Modal`, `Skeleton`, etc., for a rich user experience.
*   **Agent-Led Filtering:** Filters products based on `no-agent` tags if `isAgentLed` prop is true.

`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/orders/order-details/index.tsx` (Timestamp: 17/11/2025, 16:23:04)
This component displays detailed information for a specific order.
*   **Order Data Fetching:** Fetches order details using `makeAPICall` based on order ID, creation timestamp, and merchant order ID from URL parameters/location state.
*   **Refund Management:** Implements logic to merge repeated refund attempts, determine refund status (`Completed`, `Failed`, `Initiated`), and calculate the total refundable amount. It also manages a `RefundDrawer` for processing refunds.
*   **Price Breakup Display:** Utilizes helper functions (`DiscountBreakupsData`, `GiftBreakupData`, etc.) to parse and display various price components like discounts, taxes, shipping, gift cards, and rewards.
*   **Currency Formatting:** Dynamically sets and formats currency symbols based on order data or merchant details.
*   **Permission Handling:** Uses `validatePermission` and Redux selectors (`isMerchantSelector`, `getUserConfig`) to control feature visibility (e.g., RTO actions, RTO score).
*   **Breadcrumbs & Navigation:** Updates breadcrumbs (`addBreadcrumb`, `updateBreadcrumbs`) and handles navigation using `react-router-dom` and `single-spa`.
*   **UI Elements:** Displays order information using `gokwik-ui-kit` components like `Table`, `Tabs`, `Tag`, `Tooltip`, `Button`, `Popover`, and icons for visual cues. It also includes masked customer contact information with a reveal mechanism.
*   **Order Editing Restrictions:** Sets a title and disables editing for orders with Twid rewards or loyalty points, or specific GWP discount types.

`/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs` (Timestamp: 18/11/2025, 00:45:31 and 20/11/2025, 18:37:48)
This is an EJS template file configuring a Single-SPA application, primarily managing the loading of different micro-frontends (applications) based on the deployment environment (`isLocal`, `dev`, `qa`, `sandbox`, `production`).
*   **Dependency Management:** Includes core dependencies like React, React-DOM, and Single-SPA from CDNs.
*   **Import Maps:** Uses `<script type="systemjs-importmap">` to define how different `@gokwik` applications (e.g., `@gokwik/configuration`, `@gokwik/utilities`, `@gokwik/dashboard`, `@gokwik/checkout`) are loaded from specific URLs depending on the `deployedEnv` variable.
*   **Environment-Specific Loading:** Clearly separates the loading URLs for `local`, `dev`, `qa`, `sandbox`, and `production` environments, pointing to different hosted JavaScript bundles for each micro-frontend.
*   **Monitoring Tools:** Includes New Relic (NREUM) and Microsoft Clarity (if `clarityKey` is present) scripts for performance monitoring and analytics in the production environment.
*   **Content Security Policy (CSP):** Defines a CSP to enhance security, restricting resource loading.
*   **Minor changes:** The entries for this file show the exact same code, indicating no functional change but a re-deployment or re-commit at different timestamps.

`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx` (Timestamp: 18/11/2025, 00:49:40, 18/11/2025, 00:50:14, and 18/11/2025, 00:58:39)
This component manages free gift settings and rules for merchants.
*   **Rule Management:** Allows creation, editing, and deletion of free gift rules. Rules include settings for name, sales channels (App, Web, Agent-led), purchase requirements (cart value, quantity), applicability (all products, specific products, specific collections), free gift product selection, quantity, price, and application method (auto/selection).
*   **Dynamic Form Fields:** Uses a `fields` array with a `RenderField` component to dynamically render form inputs based on the rule configuration. Fields like "Agent led" checkbox are disabled if the application method is not 'auto'.
*   **Product/Collection Search Integration:** Integrates `ProductSearch` components to allow merchants to easily select specific products or collections that trigger or are part of the free gift rule. Includes logic to prevent adding duplicate product variants or collections.
*   **Table Display:** Presents existing free gift rules in a `Table` with columns for name, free gift product (with image), status (toggleable via `Switch`), and actions (edit/delete via `Dropdown`).
*   **State Management:** Uses `useState` to manage rule creation/editing mode, selected gift items, and form changes.
*   **API Integration:** Uses `useMerchantConfigApi` for fetching and saving merchant configurations, specifically `free_gift_config` and `auto_gift_rules_config`.
*   **Breadcrumbs:** Updates navigation breadcrumbs.
*   **Minor changes:** The three entries for this file are identical, suggesting no functional code changes were made between these timestamps, but rather re-saves or re-commits.

`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/orderConfirmationPage/collapseFields.tsx` (Timestamp: 18/11/2025, 23:42:52)
This component provides a customizable collapse interface for various sections of the order confirmation page.
*   **Collapsible Sections:** Defines several collapsible panels for "Brand Logo Customization", "Dynamic Banners", "Trust Banner", "Order Details", "Customer Information", and "Support & Communication".
*   **Dynamic Field Rendering:** Uses `RenderField` and `RenderEditorFunction` (for banners) to display various form inputs within each collapsible section.
*   **UI Customization:** Many fields allow customization of text, messages, and background/text colors using `ColorPickerHelper`.
*   **Toggleable Sections:** Each section has a `Switch` in its `extra` prop, allowing users to enable or disable the entire section on the order confirmation page.
*   **Drag-and-Drop Reordering:** Implements drag-and-drop functionality for reordering the collapsible sections, allowing users to customize the layout of the order confirmation page. The `onDragStart`, `onDragOver`, and `onDrop` handlers manage this reordering by updating the form's field values.
*   **Form Integration:** Heavily integrated with an Ant Design `Form`, using `Form.useWatch` to react to changes in the customization data.

`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/orderConfirmation/index.tsx` (Timestamp: 19/11/2025, 21:10:01, 19/11/2025, 21:11:54, 19/11/2025, 21:12:22, and 19/11/2025, 21:12:29)
This is the main page for configuring the custom order confirmation page.
*   **Enable/Disable Feature:** Includes a switch to enable or disable the custom order confirmation page, with an `Alert` explaining its implication (redirecting from Shopify's page).
*   **Form Submission & Validation:** `handleFormSubmit` collects form data and performs validation, with specific fields excluded from validation (e.g., trust banner text/tag).
*   **Layout:** Uses a two-column layout (`Row`, `Col`) with the left column for configuration forms and the right column for a live preview (`OrderConfirmationPreview`).
*   **Main Configuration Section:** Renders the `MainSection` component (which likely contains `CustomizeUiFields` or similar components) for detailed customization.
*   **State Management:** Uses `useState` for tracking form changes to enable/disable the "Save Changes" button.
*   **Initial Values:** Sets initial form values using `initialValuesForThankYouPageForm`.
*   **Info Component:** Includes an `InfoComponent` with a link to documentation for context.
*   **UI Components:** Leverages `gokwik-ui-kit` components like `Alert`, `Button`, `Card`, `Form`, `InfoCircleOutlined`, `message`, `Row`, `Col`.
*   **Pattern:** The multiple timestamps for this file (within a short period) show a `Col` flex value change from `1 1 200px` to `1 1 300px` and back to `1 1 200px` for the form column, with a corresponding change in the preview column's flex from `0 1 500px` to `0 1 300px` and back to `0 1 500px`. This suggests minor layout adjustments for the form and preview panes were made and committed in quick succession.

`/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/shipping/shippingBasedData.tsx` (Timestamp: 20/11/2025, 18:44:34, 20/11/2025, 18:44:55, 20/11/2025, 18:49:44, and 20/11/2025, 18:49:50)
This component, `processProductBasedShippingData`, is a functional component likely used within a larger form to manage product-based shipping rules.
*   **Shipping Rule Definition:** Allows defining rules with a name, price, mapping to an existing shipping ID, calculation method (override or add to base shipping), and switches for price multiplier and combining with weight-based shipping.
*   **Product/Collection Selection:** Integrates `ProductSearch` components to add specific products (variants) or collections to a rule. It includes validation to prevent adding duplicate products/collections.
*   **Item Display:** Shows a table of selected products/collections with image, title, variant count, and type, and provides a delete action for each.
*   **Form Integration:** Interacts with an Ant Design `Form` to manage rule fields, product IDs, and collection IDs.
*   **Helper Functions:** Uses `dataMapperForItems` to format selected products/collections for display.
*   **UI Components:** Uses `gokwik-ui-kit` components like `Button`, `Dropdown`, `Table`, `Tag`, `message`, and icons.
*   **Input Validation:** The entry at 20/11/2025, 18:49:44 (and 18:49:50) specifically adds `onKeyPress` validation to the 'Rule price' input to ensure only numbers and decimals are entered, indicating a refinement in input handling. The previous two entries did not have this specific validation. This is a functional change.

**Patterns and Recurring Elements:**

1.  **Gokwik UI Kit:** Heavy reliance on `gokwik-ui-kit` for UI components across all dashboard files, ensuring a consistent look and feel.
2.  **Ant Design Form:** Consistent use of Ant Design's `Form` component for managing user input, state, and validation, including `Form.useForm()`, `Form.useWatch()`, and `form.setFieldValue()`.
3.  **Redux Integration:** Use of `react-redux` (`useSelector`, `useAppDispatch`) for global state management (e.g., merchant details, user configuration).
4.  **API Utility Functions:** Common utility functions like `makeAPICall`, `makeAWSPutCall` (for image uploads), and `getVariantNCollectionDetailsbyId` are imported and used for backend interactions.
5.  **Hooks-based Development:** Extensive use of React Hooks (`useState`, `useEffect`, `useMemo`, custom hooks like `useMerchantConfigApi`, `useIntersectionObserver`) for managing component logic and state.
6.  **Custom Configuration Management:** `useMerchantConfigApi` appears frequently, indicating a pattern for interacting with and saving merchant-specific configurations.
7.  **Breadcrumbs:** `updateBreadcrumbs` utility is used to maintain navigation context across different pages.
8.  **Environment-Specific Configuration:** The `index.ejs` file demonstrates how different micro-frontends are loaded from environment-specific URLs, a common pattern in micro-frontend architectures.
9.  **Date Format:** All timestamps provided are in `DD/MM/YYYY, HH:MM:SS` format.
10. **Minor cosmetic/layout adjustments**: The `orderConfirmation/index.tsx` file shows very quick iterative changes to flexbox `Col` properties, indicating fine-tuning of UI layout.
11. **Refinement of input validation**: The `shippingBasedData.tsx` file received an update specifically for input validation on a price field, showing ongoing improvements to data integrity.