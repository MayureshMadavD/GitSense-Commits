# Activity Summary for 16/11/2025

## 10:03:40
`/Users/mayuresh.madav/Documents/pdp/gokwik.pdp/src/common/services/ShippingDiscount.service.ts` (12/11/2025, 21:20:24 and 15/11/2025, 12:00:15) is a core service managing shipping and discount logic. It heavily imports Svelte stores for state management (e.g., `gstInfo`, `discountCode`, `currentPage`, `shippingMethods`, `merchantInfo`, `freeGift`, `gyftr`, `billingAmount`). The `callShippingDiscountApi` function initiates discount and shipping calls, clears API timers, triggers confetti for valid discounts, and handles `gyftr` application/removal based on the checkout page. It also logs loyalty point applications. The `processShippingDiscountResponse` function processes API responses for shipping, shipping options, and discounts, including specific fixes for gift card handling and payment method calls, manages UI loader states, and implements retry logic for shipping method selection. No significant changes were observed between the two timestamps for this file.

`/Users/mayuresh.madav/Documents/pdp/gokwik.pdp/public/merchant.html` (13/11/2025, 14:31:36 and 15/11/2025, 11:32:20) is an HTML file serving as a test environment for the Gokwik SDK. It includes a `gokwikSdk` JavaScript IIFE for initializing the checkout, managing events, and dynamically injecting scripts. The `window.merchantInfo` configuration object defines merchant-specific parameters like `mid` and `environment`. A notable change on 15/11/2025, 11:32:20 updated the `mid` in `window.merchantInfo` for the 'local' environment from `gh0yshvkmca4pw4` to `eey3k3mkrg55tcs`. The file also manages `gk_landing_page` and `gk_orig_referrer` cookies.

`/Users/mayuresh.madav/Documents/pdp/gokwik.pdp/src/Components/place-order/PaymentOptions.svelte` experienced multiple updates from 13/11/2025, 20:56:52 to 15/11/2025, 12:01:15. This Svelte component manages the payment options screen, importing a vast array of Svelte stores to handle complex state related to payment methods, discounts, COD, UI flags, and user data. The `onMount` hook performs initial setup, including fetching UPI app presence, processing saved cards, and triggering various analytics events (GTM, Shopify, Facebook). It also conditionally calls payment methods and updates COD availability based on TwidPay rewards. Significant changes included adding `store_availableOffersCheck` to imports on 13/11/2025, 21:20:47, and further adding `store_isLoggedInUser`, `store_isCartUpdated`, `AutomaticGiftHeader`, and `GiftJourney` on 15/11/2025, 12:01:15. A new reactive block was introduced on the latter date to check `recommendedOptions` visibility and screen width, then call `checkIntentFlowSupported`. The frequent identical timestamps within the 13/11/2025 period suggest minor, non-substantive changes or repeated saves.

`/Users/mayuresh.madav/Documents/pdp/gokwik.pdp/src/Components/place-order/OrderSummary.svelte` (15/11/2025, 11:49:48 and 15/11/2025, 11:52:44) is a Svelte component for displaying the order summary. It relies heavily on Svelte stores for cart data, pricing, discounts, and loyalty. It includes a function to toggle the order summary drawer and logs analytics events for this interaction. The `onMount` hook subscribes to numerous stores to ensure real-time updates. The `handleCartUpdate` function processes cart items, calculates automatic discounts, and identifies free products. A complex reactive statement calculates the `totalPrice` by incorporating subtotal, various discounts (coupon, prepaid, loyalty, Shopify store credit), shipping, gift card totals, COD charges, TwidPay rewards, GST, and Gyftr amounts, then updates `store_totalPrice`. Another reactive block calculates `loyaltyDisplayAmount`. No significant changes were observed between the two timestamps for this file.

**Patterns and Recurring Elements:**
The codebase demonstrates a strong reliance on Svelte stores for centralized state management across components and services, enabling reactive data flow. There's a consistent pattern of using `onMount` lifecycle hooks for component initialization and subscriptions. Extensive use of analytics and event logging (`logEvent`, `fireGtmEvent`, `fireAnalytics`) is evident for tracking user interactions and checkout progress. Environment-specific configurations are crucial, with services and HTML defining parameters and API endpoints based on the deployment environment. The application handles complex payment and discount logic, integrating various types of offers and dynamically calculating pricing. The presence of multiple identical code entries for `PaymentOptions.svelte` within short timeframes suggests an iterative development process with frequent, possibly minor, saves. The overall system appears designed for robust control over the checkout flow, managing UI states, loaders, and navigation.