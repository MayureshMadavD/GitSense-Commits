# Activity Summary for 27/11/2025

## 11:23:44
The provided log details changes to a single file: `/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-utilities/src/services/common.ts`.

**File-Specific Updates:**

*   **`/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-utilities/src/services/common.ts`**:
    *   **Timestamp of Significant Change:** `22/11/2025, 17:39:07`
    *   The `makeAPICall` asynchronous function, responsible for handling all API interactions including file uploads and general requests, was updated.
    *   Specifically, the error handling within the `catch` block for HTTP 401 Unauthorized responses was refined. Previously, upon a 401 error, the function returned the entire error object spread into a new object `{ ...error, error: true }`.
    *   The update changed this to return a more standardized and cleaner error object: `{ error: true, message: error?.response?.data?.message || error.message }`. This ensures that only a boolean `error` flag and a specific `message` (derived from the API response data or the generic error message) are returned, rather than potentially exposing the full Axios error object.
    *   No functional code changes were observed between the timestamp `22/11/2025, 17:39:07` and `22/11/2025, 17:39:40`. The latter entry appears to be a save operation without further modifications.

**Patterns or Recurring Elements:**

*   All recorded changes focus on the `common.ts` file, indicating a concentrated effort on refining shared utility functions for the dashboard UI.
*   The primary function undergoing modification is `makeAPICall`, which is a central utility for API requests, including security headers, loader management, and error handling.
*   The change specifically targets error handling for unauthorized API calls (HTTP 401), suggesting a focus on improving the robustness and consistency of security-related error responses across the application.
*   The `logUserEvent` function and its associated `getFixedParams` and `parseUserAgent` helper functions, which are responsible for user event tracking and analytics, remain unchanged across the logged entries.

## 11:40:18
The log details changes across several files within an `appmaker-starter-app-expo-53-update` directory, all occurring on 26/11/2025.

**File-Specific Updates:**

*   **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/src/initApp.js`**
    *   At **16:00:52**, this file was updated to include an import for `@appmaker-packages/extension-kwik-pass-v2`, in addition to existing `@appmaker-xyz/plugins` and `@appmaker-xyz/shopify-core-theme` imports. This indicates the integration of a new Kwik Pass extension.

*   **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/package.json`**
    *   **16:16:43**: This timestamp captures the initial state of the `package.json`, listing numerous dependencies related to Expo, React Native, Firebase, and various `@appmaker-xyz` packages, many with versions ending in `-expo-v2-53-starter-app-25-11-23aa850.0`.
    *   **18:09:35**: Several `@appmaker-xyz` dependencies (e.g., `core`, `react-native`, `remote-bundle`, `shopify`, `shopify-core-theme`, `ui`, `uikit`) were updated to versions ending in `-expo-v2-53-supertails-app-working-reactotron-25-09-ac86605.0`. Additionally, `@appmaker-xyz/plugins` was updated from `0.2.87` to `0.2.88-3259-expo-locator-is-not-working-in-ios-vaaree-24-07-fe54d0d.0`.
    *   **18:10:04** and **18:13:19**: The dependency versions for the `@appmaker-xyz` packages listed above were reverted to their previous state, specifically back to versions ending in `-expo-v2-53-starter-app-25-11-23aa850.0` and `@appmaker-xyz/plugins` returning to `0.2.87`. This suggests a brief, reverted experiment or correction in package versions.
    *   **18:17:43**: A significant number of new dependencies were added, indicating an expansion of the application's capabilities. These include:
        *   `@react-native-firebase/installations`
        *   `@snowplow/react-native-tracker` (for analytics)
        *   `expo-localization`
        *   `react-native-device-info`
        *   `react-native-otp-entry` and `react-native-quick-base64` (likely for authentication/OTP features)
        *   `@appmaker-packages/extension-kwikpass-expo-package` (another Kwikpass extension)
        *   `@sparkfabrik/react-native-idfa-aaid` (for advertising identifiers)
        *   `react-native-get-random-values`
        *   Additionally, `react-native-element-dropdown` was updated from version `^1.8.12` to `^2.9.0`.

**Patterns and Recurring Elements:**

*   All recorded changes happened on **26/11/2025**.
*   The `package.json` file saw frequent modifications, especially related to the versioning of `@appmaker-xyz` packages. These packages consistently use a detailed version string format that includes `expo-v2-53` along with specific build identifiers and dates, indicating a structured release or development process.
*   There's a pattern of integrating multiple extensions and external libraries, particularly around authentication (Kwikpass, OTP), analytics (Snowplow, Firebase installations, IDFA/AAID), and device-specific functionalities (localization, device info). This suggests ongoing development to enhance features and potentially gather more user/device data.
*   The brief version change and immediate reversion for `@appmaker-xyz` packages in `package.json` within a minute suggests a testing or rollback action.

## 11:41:11
The log details a series of code changes focused on dashboard UI development, specifically around shipping settings and discount validations, with some updates to API endpoints and deployment configurations.

**File-Specific Updates:**

*   **/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/shipping-settings/shipping-component/shippingBasedMethods.tsx** (24/11/2025, 12:36:01): This new React component, `ShippingMethodConfig`, was introduced. It's a comprehensive interface for configuring shipping methods based on price, customer segments, and pincodes. It includes extensive UI elements from `gokwik-ui-kit`, state management for form inputs, modals, and file uploads. Key functionalities include fetching customer segments, uploading cohort CSVs to S3 via presigned URLs, downloading CSVs, and fetching pincode lists. Form fields are defined with validation rules covering required fields, numeric input, unique shipping names, and non-zero prices.

*   **/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/utilities/helpers/validations.ts** (Numerous updates from 24/11/2025, 12:45:40 to 24/11/2025, 17:34:51): This file consistently defines and refines validation functions for various discount types, including `validateTieredDiscount`, `validateDynamicDiscount`, `validateBuyXatYDiscount`, `validateDiscountCapping`, and `validateGWP`.
    *   **24/11/2025, 12:45:40**: Introduced a new check `differentFreebieForSameRange` within `validateTieredDiscount` to prevent conflicting freebie products for overlapping tiers.
    *   **24/11/2025, 15:16:08**: The `Weight_based_Shipping_Rates` interface was imported, and a new `validateWeightRangeDifference` function was exported (though its full implementation is not shown in the log snippets). Most other updates to this file are identical, indicating frequent saves without functional changes.

*   **/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/shipping-settings/shipping-component/weightShipping.tsx** (Numerous updates from 24/11/2025, 15:16:01 to 24/11/2025, 20:19:36): This new React component, `WeightBaseShippingMethods`, was introduced for managing shipping rates based on weight.
    *   **24/11/2025, 15:16:01**: Initial implementation including form fields for shipping name, ID, min/max weight, and price. It uses `validateWeightRangeDifference` for validation. The component also features a sortable table with filtering options based on Shipping ID.
    *   **24/11/2025, 15:23:28** and **24/11/2025, 15:27:43**: Minor adjustments to how arguments are passed to `validateWeightRangeDifference`, specifically regarding the `isEditEnabled` flag.
    *   **24/11/2025, 16:40:20**: A `console.log(weightConfig)` statement was temporarily added in a debugging step.
    *   **24/11/2025, 16:49:44**: The `console.log` statement was removed.
    *   **24/11/2025, 16:57:57**: The first argument to `validateWeightRangeDifference` was changed from `weightConfig` to `weightConfig?.weight_based_shipping_rates`.
    *   **24/11/2025, 17:07:59**: The weight range validation logic was temporarily refactored to make two separate calls for `min_weight` and `max_weight` against `validateWeightRangeDifference`, with an adjusted error message check. The first argument reverted to `weightConfig`.
    *   **24/11/2025, 17:16:36**: This refactoring was reverted, consolidating validation back to a single `validateWeightRangeDifference` call.
    *   **24/11/2025, 17:20:50**: The two-call validation approach for `min_weight` and `max_weight` was reintroduced.
    *   **24/11/2025, 17:24:39**: This was again reverted to a single validation call. The frequent changes suggest active development and iteration on the validation logic for weight ranges.
    *   **24/11/2025, 17:36:11**: An update was made to the `useEffect` hook to prevent `weight_based_shipping_rates` from being unintentionally cleared if the `weightConfigs` prop is an empty array.
    *   **24/11/2025, 20:15:07**: A debugging `console.log` was again temporarily added.
    *   **24/11/2025, 20:19:27**: The debugging `console.log` was removed.

*   **/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-configuration/src/index.ejs** (Updates on 24/11/2025, 16:50:58, 16:52:06, 16:53:39): This EJS template file, responsible for client-side module loading, saw updates to its `systemjs-importmap` configuration.
    *   **24/11/2025, 16:50:58**: `@gokwik/kwikcomm` was added to the import map for `dev` and `qa` environments.
    *   **24/11/2025, 16:52:06**: In the `isLocal` environment, the URLs for `@gokwik/utilities` and `@gokwik/dashboard` were updated from `dev-dashboard` to `qa-dashboard`.
    *   **24/11/2025, 16:53:39**: In the `isLocal` environment, the URLs for `@gokwik/utilities` and `@gokwik/dashboard` were updated from `qa-dashboard` to `sandbox-dashboard`. These changes reflect shifts in local development dependencies.

*   **/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/shipping-settings/shippingBasedService.tsx** (Updates on 24/11/2025, 20:17:43, 20:29:59, 25/11/2025, 13:00:14, 26/11/2025, 12:35:55): This new component, `ShippingService`, serves as the main entry point for shipping settings, managing a tabbed interface.
    *   **24/11/2025, 20:17:43**: Initial creation, integrating `ShippingMethodConfig`, `WeightBaseShippingMethods`, and `DiscountBaseShipping` into tabs. It includes logic for saving configurations and refetching data upon tab changes.
    *   **24/11/2025, 20:29:59**: A new tab for "Product Based Shipping" (`key: '2'`) was introduced and conditionally rendered. This caused the "Weight Based Shipping" tab to shift to `key: '3'` and "Discount Based Shipping" to `key: '4'`, and the `handleTabChange` logic was updated accordingly.
    *   **25/11/2025, 13:00:14**: The `destroyInactiveTabPane` prop was added to the `Tabs` component, likely for performance or state management.

*   **/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx** (25/11/2025, 12:58:37): A new generic React component, `ProductSearch`, was implemented. It provides a reusable modal-based search functionality for either products or collections, supporting features like infinite scroll, debounced search, filtering by tags, quantity management (including for "top-up gifts" and collection-specific rules), and displaying product variants.

*   **/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/utilities/constants/apiEndpoints.ts** (Updates on 25/11/2025, 12:59:31 and 26/11/2025, 12:35:45): This file, containing API endpoint definitions, was expanded.
    *   **25/11/2025, 12:59:31**: New endpoints `getVariantById`, `getCollectionById`, and `getProductById` were added to retrieve detailed product and collection information.
    *   **26/11/2025, 12:35:45**: A new nested object `upsellCheckout` was introduced, defining `getandDeleteUpsellData` and `updateUpsellData` for managing upsell configurations.

*   **/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/utilities/api.ts** (Updates on 25/11/2025, 12:59:47 and 26/11/2025, 12:35:28): This file provides utility functions for making API calls.
    *   **25/11/2025, 12:59:47**: `fetchShopifyCollectionsOrProducts` was updated to utilize the newly added API endpoints for product and collection searches, including logic for filtering active products and restructuring variant data. A new `getVariantNCollectionDetailsbyId` function was added to fetch detailed information for multiple variants or collections.
    *   **26/11/2025, 12:35:28**: Two new API utility functions, `getAndDeleteUpsellData` and `pushUpsellData`, were added to interact with the new upsell API endpoints.

**Timestamps of Significant Changes:**

*   **24/11/2025, 12:36:01**: Initial creation of `shippingBasedMethods.tsx`, marking the start of detailed shipping method configuration UI.
*   **24/11/2025, 12:45:40**: `validations.ts` received its first update, adding `differentFreebieForSameRange` to tiered discount validation.
*   **24/11/2025, 15:16:01**: Initial creation of `weightShipping.tsx`, introducing weight-based shipping configuration.
*   **24/11/2025, 15:16:08**: `validations.ts` imported `Weight_based_Shipping_Rates` and started exporting `validateWeightRangeDifference`, signaling integration with weight-based shipping.
*   **24/11/2025, 16:50:58**: `index.ejs` was updated to include `@gokwik/kwikcomm` for `dev` and `qa` environments, indicating deployment configuration changes.
*   **24/11/2025, 20:17:43**: Initial creation of `shippingBasedService.tsx`, centralizing shipping configuration into a tabbed interface.
*   **24/11/2025, 20:29:59**: `shippingBasedService.tsx` was updated to introduce a "Product Based Shipping" tab, changing the structure of the shipping settings.
*   **25/11/2025, 12:58:37**: Initial creation of `productSearch.tsx`, a versatile component for searching products/collections.
*   **25/11/2025, 12:59:31**: `apiEndpoints.ts` added new endpoints for detailed product/collection retrieval.
*   **25/11/2025, 12:59:47**: `api.ts` integrated new product/collection search capabilities.
*   **26/11/2025, 12:35:28**: `api.ts` added new utility functions for upsell data management.
*   **26/11/2025, 12:35:45**: `apiEndpoints.ts` defined new endpoints for upsell features.

**Patterns or Recurring Elements:**

*   **Component-based Development**: New features like shipping methods, weight-based shipping, and product search are implemented as distinct React components (`ShippingMethodConfig`, `WeightBaseShippingMethods`, `ProductSearch`).
*   **Centralized API Management**: `apiEndpoints.ts` and `api.ts` serve as central locations for defining API routes and creating utility functions for API calls, respectively. This promotes reusability and maintainability.
*   **Extensive Form and Table Usage**: Both `ShippingMethodConfig` and `WeightBaseShippingMethods` heavily utilize `Form` and `Table` components from `gokwik-ui-kit`, along with various input types and validation rules.
*   **Validation Logic**: A dedicated `validations.ts` file houses numerous validation functions (`validateTieredDiscount`, `validateDynamicDiscount`, `validateWeightRangeDifference`, etc.) for ensuring data integrity across different features. The `rangesOverlap` function is a common utility for range-based validations. There's a notable pattern of frequent saves to `validations.ts` without apparent functional changes, indicating either meticulous saving or a tool-driven save behavior.
*   **State Management**: `useState` and `useEffect` hooks are extensively used for managing component-level state and side effects, particularly for form data, modal visibility, and data fetching/updating. Redux (`useAppDispatch`, `useSelector`) is used for global state.
*   **Modularity**: Shipping configurations are broken down into sub-components (`shippingBasedMethods`, `weightShipping`, `discountShipping`, `productBasaedShipping`) orchestrated by `ShippingService`, demonstrating a modular approach.
*   **Environment Configuration**: The `index.ejs` file shows dynamic loading of micro-frontends (e.g., `@gokwik/utilities`, `@gokwik/dashboard`) based on the `deployedEnv` (local, dev, qa, sandbox), reflecting a multi-environment deployment strategy. Changes here indicate switching local development environments.
*   **Debugging Practices**: Temporary `console.log` statements (`weightShipping.tsx` at 16:40:20 and 20:15:07) suggest active debugging during development.
*   **Feature Expansion**: The log shows a clear progression of adding new features: price-based shipping, then weight-based, then a "Product Based Shipping" tab, and new API calls for upsell functionality, indicating continuous development and expansion of the dashboard's capabilities.

## 12:23:43
The provided log details changes to a single file: `/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-utilities/src/services/common.ts`.

**File-Specific Updates:**

*   **`/Users/mayuresh.madav/Documents/dashboard/dashboard-ui-utilities/src/services/common.ts`**
    *   The primary change occurred around **22/11/2025, 17:39:07**.
    *   Within the `makeAPICall` asynchronous function, in the `catch` block that specifically handles `401` (unauthorized) HTTP status codes, the error return mechanism was refined.
    *   **Before 17:39:07**, if an unauthorized error occurred, the function would return an object like `{ ...error, error: true }`.
    *   **At 17:39:07 (and subsequently at 17:39:40)**, this return was updated to `{ error: true, message: error?.response?.data?.message || error.message }`. This modification ensures that a more descriptive error message is explicitly provided, preferring a message from the API response (`error?.response?.data?.message`) if available, otherwise falling back to the generic `error.message`.
    *   Aside from this specific error handling improvement, the overall structure and other functionalities within `makeAPICall` (e.g., handling internal users, file uploads, loader events, navigation on 401) and `logUserEvent` (e.g., user agent parsing, fixed parameters) remained consistent across all logged timestamps.

**Timestamps of Significant Changes:**

*   The most significant functional change observed occurred at **22/11/2025, 17:39:07**. The preceding entry at 17:38:55 shows the code before this specific alteration, and the subsequent entry at 17:39:40 shows the code maintaining this change.

**Patterns or Recurring Elements:**

*   All logged changes are minor refinements to error handling within a critical `makeAPICall` function, specifically around how 401 unauthorized errors are communicated back to the caller.
*   The code consistently uses Axios for API calls, includes robust error handling with navigation for unauthorized users, manages loading states (`loaderEvent`), and integrates with dashboard-specific utilities for user data and cookies.
*   There's also a `logUserEvent` function which gathers extensive user and device information, indicating a focus on analytics and user tracking.

## 12:40:19
The provided log details changes within an `appmaker-starter-app-expo-53-update` project.

**File-Specific Updates:**

*   **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/.env`**: This file, containing AppMaker project IDs, was logged twice at 26/11/2025, 14:03:10 and 26/11/2025, 14:04:09. Its content remains consistent across these entries.

*   **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/src/initApp.js` (Timestamp: 26/11/2025, 16:00:52)**: This file was updated to include imports for `@appmaker-xyz/plugins`, `@appmaker-xyz/shopify-core-theme`, and specifically `@appmaker-packages/extension-kwik-pass-v2`, indicating the initialization of core AppMaker components and a Kwik Pass extension.

*   **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/package.json`**: This file underwent multiple modifications throughout the day:
    *   **Initial State (Timestamp: 26/11/2025, 16:16:43)**: The project is named `@appmaker-xyz/appmaker-sdk` with version `3.0.0`. It lists numerous dependencies, including core AppMaker packages (e.g., `@appmaker-xyz/core`, `@appmaker-xyz/shopify`) and various React Native libraries. Key versions noted are `expo: ^53.0.0`, `react: 19.0.0`, and `react-native: 0.79.5`.
    *   **Dependency Update (Timestamp: 26/11/2025, 18:09:35)**: Several `@appmaker-xyz` packages were updated with new, more descriptive version strings (e.g., `0.4.36-expo-v2-53-supertails-app-working-reactotron-25-09-ac86605.0`), and `@appmaker-xyz/plugins` received a specific version bump to `0.2.88-3259-expo-locator-is-not-working-in-ios-vaaree-24-07-fe54d0d.0`. Additionally, `@appmaker-xyz/parser` was removed from the dependencies.
    *   **Dependency Reversion (Timestamp: 26/11/2025, 18:10:04)**: The dependency changes from the previous entry were largely reverted. The `@appmaker-xyz` package versions returned to their initial `starter-app-25-11-23aa850.0` forms, and `@appmaker-xyz/parser` was re-added.
    *   **No Change (Timestamp: 26/11/2025, 18:13:19)**: The content of `package.json` at this timestamp is identical to the preceding entry, suggesting a re-save or no functional change.
    *   **New Dependencies Added (Timestamp: 26/11/2025, 18:17:43)**: A significant number of new dependencies were added, including:
        *   Firebase-related: `@react-native-firebase/installations`
        *   Analytics/Tracking: `@snowplow/react-native-tracker`, `@sparkfabrik/react-native-idfa-aaid`
        *   Expo & React Native utilities: `expo-localization`, `react-native-device-info`, `react-native-otp-entry`, `react-native-quick-base64`, `react-native-get-random-values`
        *   AppMaker Extension: `@appmaker-packages/extension-kwikpass-expo-package`
        *   An existing dependency, `react-native-element-dropdown`, was updated from `^1.8.12` to `^2.9.0`.

**Patterns and Recurring Elements:**

*   **AppMaker Ecosystem Development**: The project path and extensive use of `@appmaker-xyz` and `@appmaker-packages` dependencies confirm this is an AppMaker SDK project.
*   **Expo 53 Focus**: The project name and `expo` dependency (`^53.0.0`) indicate a specific focus on compatibility with Expo SDK 53.
*   **Detailed Versioning**: Many `@appmaker-xyz` dependencies utilize highly specific version strings that include build information and dates (e.g., `-expo-v2-53-starter-app-25-11-23aa850.0`), suggesting a tightly controlled internal release process.
*   **Rapid Iteration**: The multiple updates and a reversion to `package.json` within a few hours (between 16:16 and 18:17) point to active development, testing, and dependency adjustments.
*   **Integration of External Services**: The consistent presence of `@react-native-firebase` packages and the addition of `@snowplow/react-native-tracker` and IDFA/AAID packages suggest a focus on analytics, user authentication, and potentially crash reporting or remote configuration.
*   **Kwikpass Extension**: The inclusion of `extension-kwik-pass-v2` in `initApp.js` and `@appmaker-packages/extension-kwikpass-expo-package` in `package.json` indicates an integration with Kwikpass functionality.