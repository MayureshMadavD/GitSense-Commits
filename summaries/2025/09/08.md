# Activity Summary for 08/09/2025

## 15:29:43
The log shows code changes on August 9th, 2025,  primarily focusing on environment-specific configurations and merchant information handling.

`/Users/madav/Documents/checkout UI/gokwik.pdp/public/merchant.html` (14:53:09): This file is an HTML page for merchant interaction.  It includes a form to input merchant ID and JSON data, which are then saved to cookies.  There's a button to initiate checkout using `window.postMessage`, sending merchant information including a hardcoded merchant ID (`gh0yshvkmca4pw4`), app ID and app secret. The code also manages cookies (`getCookieGk`, `setCookieGk`), dynamically loads a script (`gokwik.js`), and interacts with a Privy widget.  The code also contains a large number of commented-out merchant IDs, suggesting that this file has been modified repeatedly to test different merchant integration.  The presence of commented-out analytics script suggests earlier attempts at integrating an analytics library.

`/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts` (14:53:43 and 14:53:54): This TypeScript file defines functions to retrieve base URLs for various services based on the environment (`dev`, `qa`, `sandbox`, `production`, and others).  There are multiple functions (e.g., `getHealthServiceBaseUrl`, `getAddressSuggestionBaseUrl`, `api_url`, `experiment_url`, `twidpay_api`, `kp_api`, `cdn_path`, `analytics_api`, `analytics_api_v2`) that return different URLs based on the environment variable 'env'. The `api_url` function handles numerous environment types, each with a corresponding URL, highlighting the complex environment management structure.  A notable change between the two timestamps is within the `api_url` function where the URL for the `local` environment is updated from commented-out options to  `'https://api.gokwik.co'`.  The file also defines functions to retrieve tokens (`XGokwikToken`, `XKWIKPASSToken`) and merchant URLs based on the environment.  The `setCart` function sets a sample cart object to the store which is likely used in local development.  The file subscribes to MobX stores (`store_merchanturl`, `store_environment`, `store_cashToPrepaid`) for reactive updates.


## 16:29:42
The provided code logs show updates to several files within a checkout UI project, specifically focusing on  `/Users/madav/Documents/checkout UI/gokwik.pdp` directory.  The most significant changes revolve around the `MerchantAPI.ts` file, which underwent two updates within a short timeframe (08/09/2025, 15:53:30 and 08/09/2025, 15:55:24).  These updates appear to involve extensive modifications to asynchronous API functions handling various aspects of the checkout process, including cart management, user authentication (checkLogin, submitPhoneNumber), address management (addAddress, deleteAddress), and experiment tracking (getUserExperiments, assignUserVariant).  The code extensively uses `store` objects suggesting a reactive state management approach.  The `MerchantAPI.ts` updates show no apparent changes in functionality, only potentially minor formatting or internal refactoring.


The `DeliverAddress.svelte` file was updated twice (08/09/2025, 16:13:24 and 08/09/2025, 16:14:36), with the second update un-commenting a `<button>` element, enabling users to navigate to an address listing. This component interacts with `MerchantAPI.ts` to retrieve and display delivery address information.


The `Helper.service.ts` file (08/09/2025, 16:29:36) contains a large number of functions managing various aspects of the checkout flow, including store subscriptions, bottom sheet management (closeBottomSheet, closeFullScreenPopUp), order processing (setCreateOrderStores), and utility functions (getBadgeTitle, detectAutofill).  It also demonstrates interactions with several stores within the application and extensive use of asynchronous operations.  This file heavily relies on other services and stores within the project. The code uses a lot of subscriptions to stores which suggests a reactive programming style.


## 17:29:48
The log shows multiple revisions to two Svelte components, `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/Helper.service.ts` and `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/address/AddressInputs.svelte`, between 16:32:58 and 17:21:14 on August 9, 2025.

`/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/Helper.service.ts`  underwent two revisions.  The changes primarily involved updates to functions managing various aspects of the checkout process.  These include functions for handling autofill events (`autofillEvents`), closing different UI elements (`closeBottomSheet`, `closeIframe`, `closeFullScreenPopUp`), setting order-related store values (`setCreateOrderStores`), and determining discount badge titles (`getBadgeTitle`). The subscriptions to multiple stores are also present in the code to update the state of various variables according to the data from the stores. There is an `setAddress` function which takes an `AddressResponseInterface` as input and sets the `store_selectedAddress` store.


`/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/address/AddressInputs.svelte` was modified multiple times. The component manages address input fields.  The primary focus of the revisions was refining the handling of address input, particularly concerning conditional rendering and data updates based on various store values like `store_additionalAddress`, `store_addressSuggestionFlow`, and `store_enableRecipientPhone`.  There are several subscriptions to stores which update the state of variables such as `editFlag`, `pincode`, `selectedAddress`, and `phoneNo` from their respective stores.  The code also includes logic for handling KwikPass logins and incorporating GST billing information.  The core functionality of updating address information remains consistent, but conditional logic and event handling have seen considerable adjustments across the various commits.  The changes in the later revisions focuses on simplifying and optimizing the code and removing unnecessary logs.


## 20:24:24
The log shows multiple revisions of two Svelte components (`AddressInputs.svelte` and `App.svelte`) and an environment service file (`EnvironmentService.ts`) within a checkout UI project.  The changes primarily involve updates to how the UI handles addresses,  checkout flows, and environment configurations.

`/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/address/AddressInputs.svelte`: This file underwent two revisions on August 9th, 2025, at 18:44:07 and 18:51:13.  Both revisions are almost identical, indicating minor, likely inconsequential changes between the commits. The component manages address input fields, dynamically adjusting based on various store values like `store_additionalAddress`, `store_addressSuggestionFlow`, and `store_enableRecipientPhone`.  It uses numerous Svelte lifecycle functions (`onMount`, `onDestroy`, `beforeUpdate`, `afterUpdate`) and subscribes to many stores from `LoginStore` and `CommonStore`. The component handles both adding and editing addresses, firing analytics events accordingly.


`/Users/madav/Documents/checkout UI/gokwik.pdp/src/App.svelte`: This file shows four revisions between 18:58:59 and 19:05:14 on August 9th, 2025. The revisions appear to be related to bug fixes or minor improvements to the main checkout application. The component is the main application entry point, handling various aspects of the checkout process, from address selection and input to payment options and order confirmation.  It heavily relies on numerous stores from `LoginStore` and `CommonStore`, managing the application state and UI flow. It incorporates various components like address selection (`Address.svelte`, `AddressListing.svelte`), payment options (`PaymentOptions.svelte`), and various error and loading screens.  A significant part of the code focuses on handling communication with an iframe using `window.addEventListener('message')`, suggesting integration with a third-party service.  The code also manages the setting and retrieval of cookies and local storage items for authentication and other data.


`/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts`: This file, updated at 19:00:10 on August 9th, 2025, defines functions to construct URLs based on the current environment (e.g., 'dev', 'qa', 'production', 'local'). It demonstrates dynamic URL construction for various APIs (health, address suggestion, main API, analytics, etc.), indicating a microservices architecture. The code also includes functions for handling KwikPass tokens. The use of `window.merchantInfo` suggests that the application may integrate with different merchant platforms.  The file subscribes to stores to manage the current environment and related data.

The overall pattern across all files is a heavy reliance on numerous stores for managing application state, extensive use of event listeners and lifecycle functions in Svelte components, and dynamic URL construction for API calls, consistent with a complex, data-driven application.  The repeated minor changes to `App.svelte` suggest an iterative development process focused on refinements and bug fixes.


## 21:24:15
The log shows multiple updates to `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/address/AddressListing.svelte` and `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/Discounts.service.ts` files between 20:39 and 21:02 on 08/09/2025.  There are also updates to `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/NewShippingMethod.svelte` and `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/Discounts/AvailableOffers.svelte` between 21:15 and 21:17 on the same day.


**`/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/address/AddressListing.svelte`:**

This Svelte component manages address listing.  Significant changes involve the `processAddress` function, which retrieves and processes address data. Several updates focused on handling the `store_emailBasedCohortDiscounts` store, particularly refining the logic for fetching available offers based on its value and the `store_validOffersState`.  A `setTimeout` function was added and later removed within a subscriber to the `store_validOffersState`. The `map` function within `processAddress` was changed to an `async` function to handle address processing.  Finally, there were minor adjustments and removal of `console.log` statements.

**`/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/Discounts.service.ts`:**

This TypeScript file contains functions related to discount and offer management. The most notable changes are within the `getAvailableOffers` function. This function handles the retrieval and processing of available discounts, including filtering based on experiment variants (`store_showHidePaymentOffers`) and removing flash offers based on the `flashOfferExp` store's `isEnabled` flag. There was a change to how `store_emailBasedCohortDiscounts` is updated upon successful API call.  Several minor updates, comments, and log statements were added or removed throughout the file.


**`/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/NewShippingMethod.svelte` and `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/Discounts/AvailableOffers.svelte`:**

These components were updated concurrently.  `NewShippingMethod.svelte` retrieves and applies shipping methods while  `AvailableOffers.svelte` displays and handles available offers/discounts.  Updates to `AvailableOffers.svelte` include improved organization of coupon data into different categories based on payment method and auto-apply logic.  The `reorderCoupons` function was enhanced to sort coupons by payment method based on the order defined in `store_paymentMethodsOrder`.  Additionally, the logic for handling flash offers and confirming their application was refined.  In  `NewShippingMethod.svelte`, a `console.log` statement showing the `store_skipToPayment` and `store_emailBasedCohortDiscounts` stores was added.

Recurring elements across all files include extensive use of Svelte stores for state management, frequent interaction with APIs (`getAllAddress`, `updateCart`, `availableOffersCall`, `deleteAddress`), and logging events for analytics and debugging purposes.  The updates show a strong focus on improving the handling of discounts and offers, especially those related to email-based cohorts and payment methods.


## 22:24:13
The log shows multiple updates to two Svelte components, `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/NewShippingMethod.svelte` and `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/address/AddressListing.svelte`, and one file `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts` between 21:24 and 22:17 on August 9, 2025.  The `NewShippingMethod.svelte` component underwent several revisions focusing primarily on handling shipping methods, incorporating discount codes and offers, and integrating with various store subscriptions (`store_freeShipping`, `store_emailBasedCohortDiscounts`, `store_skipToPayment`, etc.).  The changes included adding a subscription for `store_emailBasedCohortDiscounts` and refining the logic for fetching and setting shipping methods based on various conditions.  A significant change involved the addition of `getAvailableOffers` call in `getShippingMethods` function based on the `eamilBasedIdentification` flag and the `$store_skipToPayment.skip_flow` status.


The `AddressListing.svelte` component was also updated multiple times,  primarily focusing on address management, including fetching, deleting, and validating addresses, handling user interaction, and integrating with analytics and event services.  Key changes involve enhancements to address validation (`addressValidate` function) and error handling, improved integration with various stores (`store_addressesMasked`, `store_selectedAddress`, etc.), and more robust event tracking using `fireGtmEvent` and `logEvent` functions. A notable change was the introduction of `emailBasedCohortDiscounts` variable and its integration into offer fetching logic within `processAddress`.


The `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts` file defines functions to retrieve base URLs and tokens for different environments (dev, qa, sandbox, production).  The `setCart` function initializes a cart object with specific attributes, notably for local environment.  The changes in this file involve updating the cart object and adding handling for additional environments.
