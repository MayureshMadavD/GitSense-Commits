# Activity Summary for 18/09/2025

## 11:08:46
The `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/store/discounts/api.ts` file was updated on 17/09/2025 at 23:34:05.  The update significantly modifies the `requestMapDiscount.setup` function. This function handles the mapping of discount data, including  logic for different discount types (`cartItemsDiscount`, `bundleDiscount`, `tieredDiscount`, `discountedCartItems`, `shippingDiscount`).  It incorporates extensive product and collection management, using functions like `mapProducts` and `mapCollections` to compare and update product and collection data based on existing and new data.  `mapProducts` specifically uses `compareProductArrays` to handle additions, removals, and variant mismatches within product lists. The `editCollectionId` function ensures Shopify collection IDs are correctly formatted.  The code heavily relies on Shopify APIs for fetching product and collection data. The update also includes helper functions for data manipulation, such as `assignMatchType` and several others for mapping and comparing collections and products.  The changes suggest a robust system for managing discounts in a Shopify context, allowing for granular control over products, collections, and discount application rules.  The use of `previous` data in the `setup` function implies this update is designed for managing changes to existing discounts.


## 12:08:48
The provided log shows updates to two files within the `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui` directory.  Both are related to shipping settings within a checkout dashboard UI.


`/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/store/discounts/api.ts` (18/09/2025, 11:30:44): This file contains extensive logic for managing discounts, particularly those related to cart items, bundles, tiered discounts, and shipping.  Key functions include `requestMapDiscount`, which handles the mapping and structuring of discount data for API requests, and several helper functions (`assignMatchType`, `editCollectionId`, `mapCollections`, `fetchAllProductsByIds`, `responseMapCollections`, `responseMapProducts`, `mapProducts`) for data transformation and fetching product/collection information from Shopify. The code extensively uses Shopify's `gid` identifiers for products and collections and performs complex comparisons between existing and new product/variant data to determine additions and removals.

`/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/settings/shipping-settings/shipping-component/shippingBasedMethods.tsx` (18/09/2025, 11:42:30, 11:52:35, 11:53:28): This React component handles the configuration of shipping methods.  It uses `gokwik-ui-kit` components for the UI and interacts with several helper functions from `@library/utilities/helpers/helper` (e.g., `deepCompare`, `formatAmount`, `uploadCohortCsv`).  The component fetches customer segments using `fetchCustomerSegments` from the discount store.  Significant updates involve the handling of CSV uploads for pincodes, with changes to the logic for validating the format of uploaded CSV files (single column, horizontal, or vertical). The code also includes functions for uploading and downloading CSV files to/from a server using signed URLs and managing form data for shipping configurations.  Multiple updates to this file within a short time frame suggest iterative development and debugging of the CSV upload and validation process.  The use of `makeAPICall` indicates communication with a backend API.


## 13:08:51
The `adsAnalytics.tsx` file, last updated on 18/09/2025 at 12:14:03, is a React component for managing ads and analytics integration settings.  It uses `gokwik-ui-kit` components and interacts with a merchant configuration API (`useMerchantConfigApi`) and Redux store (`react-redux`) to manage settings for various analytics platforms like Meta Ads, Google Analytics (GA4), Snapchat, Edge Tag, Ingest Labs, and Customer Labs.

The component features a form (`Form.useForm`) allowing users to customize settings for each integration.  Significant logic handles saving configurations (`saveConfig`) and credentials (`saveCreds`).  The `handleSwitchChange` function updates the configuration based on toggle switches. `handleCustomizeClick` opens a drawer for more detailed settings.  The `handleSave` function validates the form, formats data for different platforms (handling differences in data structure for Meta Ads, GA4, and Snapchat notably), and saves the configuration to the API and credentials to the Redux store via dispatch.  Error handling is present using `message.error`.  `useEffect` hooks are used to populate the form with existing configuration and credentials on component mount and whenever the `config` or `merchantCredentials` props change.  The component utilizes helper functions like `deepEqualAndDiff` for efficient comparison of objects.  Data is structured as an array of objects, each representing an integration with its key, title, icon, and a `customize` flag.  The code extensively manages pixel data, particularly for GA4 and handling multiple pixel IDs for Meta Ads and Snapchat, ensuring data consistency and handling potential edge cases.


## 14:08:49
The log shows multiple updates to the `/Users/madav/Documents/checkout UI/gokwik.pdp` project on September 18, 2025.  The most significant changes revolve around the `EnvironmentService.ts` file, which manages environment-specific API URLs and configurations. This file underwent several revisions throughout the day, primarily modifying the `api_url` function to handle different environment settings (dev, qa, sandbox, production, and various sub-environments). The `local` environment setting repeatedly changed its target URL, indicating ongoing experimentation or debugging.  The  `local` environment initially pointed to `https://qa-core-api.dev.gokwik.in` , later shifting to `https://sandbox.gokwik.co`.


The `merchant.html` file, updated at 12:07:38, presents a merchant interface that uses JavaScript to interact with the Gokwik SDK, handling merchant information, cookie management, and checkout initiation. It includes a form for saving merchant details and includes several hardcoded merchant IDs, suggesting various merchants are being tested.

The `EarnedLoyalty.svelte` component displays earned loyalty points based on data from the `store_earnedLoyaltyDetails` store. A minor change in this component's logic around displayAmount condition was made at 13:19:39, removing the check `> 0`.  This was reverted shortly after at 13:20:41.


## 18:09:03
The log shows three revisions of the `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/settings/shipping-settings/shipping-component/discountShipping.tsx` file between 18:00:03 and 18:02:04 on September 18, 2025.  The changes are minor and primarily involve styling adjustments within the component's UI.

Specifically, the modifications focus on the positioning and appearance of the "Save" button. In the first version, there's no explicit styling for the "Save" button's margin.  The second revision adds `ml-2` (margin-left 2) to the "Save" button's className. The final revision replaces `ml-2` with `ml-7`, further adjusting the horizontal margin of the "Save" button.  No functional changes to the component's logic or data handling are evident.  The core functionality of adding, editing, and deleting discount shipping configurations remains unchanged across all versions.


## 19:08:56
The provided log shows two entries for the file `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/ApiService.ts`, both at 18/09/2025, but with a three-minute difference (18:21:20 and 18:24:20).  The code itself is identical in both entries. The file contains functions `getCall` and `postCall` which handle HTTP requests.  These functions extensively manage loading states using `common_loader`, handle various API responses (including error handling and different HTTP status codes), and update several stores (`store_priceBreakUp`, `store_selectedShippingMethod`, `store_disableContinueButton`, etc.) based on the API responses. The code includes extensive conditional logic to handle different API endpoints and scenarios, especially concerning order creation, payment, and shipping.  There's also integration with Shopify and error logging/reporting mechanisms.  The timestamps suggest a possible commit/rollback scenario or an accidental double entry in the change log.  No substantive changes are apparent between the two entries.
