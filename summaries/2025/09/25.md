# Activity Summary for 25/09/2025

## 14:13:54
The log shows a single code update to `/Users/madav/Documents/dashboard_checkout/dashboard-ui-utilities/src/utils/imageSanitization.ts` on September 25th, 2025 at 13:13:57.  This update involves a function `cleanImageWithCanvas` which takes a File object and two callbacks (one for success, one for error). The function uses a canvas to sanitize the image, converting it to a PNG with 90% quality. Error handling is implemented for canvas support, blob creation, and image decoding failures.  The core functionality is to read the file, create an image from it, draw it onto a canvas, and then convert the canvas content back into a File object before passing it to the success callback.


## 14:13:59
The log shows several updates to three Svelte components (`MobilePhoneInput.svelte`, `Discounts.svelte`) and an HTML file (`merchant.html`) between 13:13 and 13:30 on September 25, 2025.

`/Users/madav/Documents/checkout UI/gokwik.pdp/public/merchant.html`: This file, updated at 13:13:57, is an HTML page containing a merchant interface.  It includes JavaScript code for interacting with a GoKwik SDK, managing merchant information, saving data to cookies (merchant ID, JSON input, selected environment), and displaying a button to initiate checkout. The JavaScript code heavily uses `postMessage` for communication with other parts of the application.  The HTML also includes styling for the form and integrates a Privy widget.

`/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/Discounts/Discounts.svelte`: This Svelte component, updated twice (13:20:41 and 13:20:49), manages discounts and offers during checkout. It interacts with numerous stores (using Svelte's reactive declarations `$:`) to handle discount codes, automatic discounts, loyalty programs, gift cards, and stacked discounts. The component has extensive logic for applying and removing discounts, handling various offer types, and updating the UI based on the applied discounts.  The numerous imports suggest a complex system involving various services for discount calculations, analytics, and API calls.

`/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/login/MobilePhoneInput.svelte`: This Svelte component was updated multiple times (13:22:53, 13:23:09, 13:23:24, 13:23:30, 13:24:48, 13:29:35, 13:30:45)  It handles mobile phone number input during login.  The code manages input validation, interacts with various stores (similar to `Discounts.svelte`), makes API calls using `submitPhoneNumber` and `updateCart`, handles various login flows (including those involving `soToken`), and manages UI updates based on API responses.  Significant changes over the multiple updates seem to be centered around refining the handling of gift card rewards (`store_giftCardRewards`) and the logic around removing credits when applicable.  The repeated updates suggest iterative debugging and refinement of the phone number submission and subsequent data handling.  A large number of stores are imported, indicating a high degree of integration with the overall application state.


## 16:13:56
The log shows code changes on September 25, 2025, primarily focused on the `/Users/madav/Documents/dashboard_checkout/dashboard-ui-configuration/src/index.ejs` file.  This file appears to be an EJS template for a single-spa application, configuring import maps for different environments (local, dev, qa, sandbox, production).

The `index.ejs` file underwent significant updates at 15:15:46.  These changes involve altering the import map to load different versions of various Gokwik components (`@gokwik/*`) based on the `deployedEnv` variable.  Local development uses localhost URLs, while other environments (`dev`, `qa`, `sandbox`) use different deployment URLs on `dev.gokwik.in`.  The production environment includes additional scripts for Clarity and New Relic monitoring, suggesting a production deployment at this time.  The consistent use of `https://<env>-dashboard.dev.gokwik.in` across different environments points to a structured deployment strategy.  The script also includes CDN links for React, React-DOM and single-spa.

There is no summary for the `.env` file as it contains sensitive information.


## 18:13:57
The log shows modifications to the `checkout-dashboard-ui` project on September 25th, 2025.  The most significant changes are within the `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/library/components/shipping/shippingBasedData.tsx` file.  This file underwent updates at 17:58:50 and 18:01:18.  These updates primarily involve refinements to the `processProductBasedShippingData` function, which handles product-based shipping data.  Specifically, the changes include adding `defaultValue: false` to the `price_multiplier` and `combine_with_weight_based` fields in the `fields` array. This suggests improvements in default values for these settings within the UI.


The `/Users/madav/Documents/dashboard_checkout/dashboard-ui-configuration/src/index.ejs` file was modified at 17:57:22. This file is an EJS template that dynamically generates HTML based on the environment (`isLocal`, `deployedEnv`). It manages the inclusion of various JavaScript modules (`@gokwik/*`)  from different environments (local, dev, qa, sandbox, production), demonstrating a system for managing environment-specific dependencies. The production environment also shows the inclusion of Clarity and New Relic scripts, indicating performance monitoring and analytics.  The code uses SystemJS import maps for module loading.


Finally, `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/settings/shipping-settings/productBasaedShipping.tsx` was updated at 18:08:01. This component uses the `processProductBasedShippingData` function and renders a form for managing product-based shipping rules. It interacts with a backend API (`useMerchantConfigApi`) for fetching and saving configurations. The component includes functionality for adding new rules, displaying existing rules in a table, and editing existing rules through a drawer.


## 19:14:19
The log shows updates to two files: `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/library/components/shipping/shippingBasedData.tsx` and `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/settings/shipping-settings/productBasaedShipping.tsx`.  The `shippingBasedData.tsx` file underwent two revisions within a minute of each other (18:14:48 and 18:15:38), suggesting minor edits.  These changes appear to focus on refinements within the `fields` definition, specifically  adjusting the `inputProps` for `price_multiplier` and `combine_with_weight_based` to include the `defaultValue` property.  This likely improves the default state management of these form fields.


The `productBasaedShipping.tsx` file was modified multiple times between 18:24:27 and 18:28:22.  These changes primarily involved the `handleFormSubmit` function.  Initial versions lacked sufficient null checks for `price_multiplier` and `combine_with_weight_based` in the `formValues` object. Later revisions added these checks to ensure proper handling of these fields, preventing potential errors when these values are absent.  A `console.log(formValues)` statement was also temporarily added and subsequently removed, suggesting debugging efforts.  The overall purpose of these changes is to robustly handle form submission, validating and preparing data before saving the configuration.

A third file, `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/library/utilities/helpers/helper.ts`, was updated at 18:52:09.  This file contains a collection of utility functions, including date formatting, currency formatting, deep comparison, debouncing, and data manipulation.  No specific details of the changes made are provided in this log entry.


## 21:13:56
The Svelte component `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/login/MobilePhoneInput.svelte` was updated on 25/09/2025, 20:17:59.  The update significantly enhances mobile phone number input handling within a checkout process.

Key changes include:

* **Improved Input Validation:**  The component now rigorously validates phone numbers using regular expressions, providing feedback to the user via snackbar messages.
* **Extensive Store Management:** The code interacts with numerous Svelte stores (`store_phoneNo`, `store_disableContinueButton`, `store_GSTBilling`, `store_giftCardRewards`, etc.) managing various aspects of the checkout flow, including user data, addresses, discounts, and payment options.  Many stores are updated based on API responses.
* **Asynchronous API Calls:** The `callPhoneAPI` function makes asynchronous calls to a `MerchantAPI` (`submitPhoneNumber` and `updateCart`) to validate phone numbers and update cart information.  The API response heavily influences the state of many stores and UI elements.
* **Conditional Logic and Event Handling:**  The code includes elaborate conditional logic based on user input, store values, and API responses to manage various scenarios and user flows (e.g., handling optional notifications, different merchant IDs, and skip-to-payment options).  Numerous events are fired using various services (`fireGtmEvent`, `fireAnalyticsGa4`, `logEvent`).
* **Error Handling:**  The component handles various error scenarios by displaying appropriate messages in the snackbar and disabling UI elements as needed.
* **Integration with External Services:** The component interacts with several external services:  `MerchantAPI`, `EventService`, `ForeignAnalytics`, `Helper.service`, `WalletCredits.service`, `Discounts.service`, and `Gyftr.service`.


The `onMount` function performs initial setup, including setting default store values and firing GTM events. The `onDestroy` function cleans up subscriptions.  The core logic centers around validating the phone number, making API calls based on various conditions, and updating the application state accordingly through store manipulation.  The code suggests a complex checkout system with many features and integrations.  Specific merchant IDs trigger special notification handling.  The presence of  `store_skipOtpMobile` and `store_partialAddress` indicates support for a streamlined checkout experience for returning users.
