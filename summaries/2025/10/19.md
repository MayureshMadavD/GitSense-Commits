# Activity Summary for 19/10/2025

## 15:05:21
**File: `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/ApiService.ts`**

This file, responsible for handling API calls within the application, underwent several updates throughout the logged period.

*   **19/10/2025, 14:20:24**: The initial state of the file defines `getCall` and `postCall` functions. These functions utilize `XMLHttpRequest` to make HTTP requests, incorporating logic for dynamic base URL selection based on environment, managing request headers (including Shopify session and cookie information), and integrating a common loader system. Error handling mechanisms (`sendError`) are present, and API responses are parsed. Notably, `postCall` includes logic to process `priceBreakup` data, updating `store_gyftr` and `store_priceBreakUp`. A critical merchant health check mechanism is in place, which logs 'merchant_unhealthy' events and triggers redirects to Shopify if the checkout is deemed unhealthy.
*   **19/10/2025, 14:22:12 to 14:47:50**: Changes during this timeframe primarily involved modifications to `console.log` statements within the `postCall` function, indicating active debugging and logging adjustments rather than core functional alterations. The placement and content of these logging statements were slightly shifted across different commits.
*   **19/10/2025, 14:50:58**: A significant functional update was introduced. The file began importing `httpsErrorStatusCode` from `../utils/TextConstants`. A new error handling condition was added within the `postCall`'s `xhr.onload` callback. This condition specifically checks if an endpoint identified as a `merchantHealthCheckEndpoint` returns an HTTP status code present in the `httpsErrorStatusCode` list. If this condition is met, the system triggers a `shopifyRedirect`, suggesting a mechanism to gracefully exit to the native Shopify checkout in case of critical API errors.
*   **19/10/2025, 14:59:37**: The list of `merchantHealthCheckEndpoints` in the `postCall` function was expanded to include `APIConfig.login.validateToken`. This change indicates that the application now considers issues with login token validation as part of its critical merchant health checks, which could also lead to a `shopifyRedirect` upon encountering specific HTTP errors.

**File: `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/utils/TextConstants.ts`**

*   **19/10/2025, 14:50:12**: This file was newly introduced to centralize various UI texts and error messages across the application. It defines constants for:
    *   Special characters (e.g., `rupee`).
    *   JWT token cleanup sources.
    *   Address-related fields and messages (`Address`).
    *   Header labels (`Header`).
    *   Common UI phrases (`Common`).
    *   Mobile number input and OTP flow (`MobileNumber`).
    *   Shopping bag titles (`ShopingBag`, `ShoppingBag`).
    *   Detailed order summary item properties (`OrderSummary`).
    *   Delivery address actions (`DeliverAddress`).
    *   Shipping method messages and errors (`ShippingMethod`).
    *   Discount and coupon-related texts (`Discounts`).
    *   Gift card functionality and messages (`GiftCards`).
    *   General button texts (`ButtonText`).
    *   Order pending page messages (`OrderPendingPage`).
    *   Generic and specific API error messages (`APIErrorHandling`).
    *   Custom validation errors (`CustomErrors`).
    The file also imports image-related constants, suggesting a broader centralization effort for UI assets. The purpose of this file is to enhance maintainability and consistency of textual content.

**Patterns and Recurring Elements:**

*   **API Call Standardization**: There is a clear pattern in `ApiService.ts` for handling API calls (both GET and POST) using `XMLHttpRequest` wrapped in `Promise` objects. This consistent approach includes standardized header construction, loader management, and initial response processing.
*   **Centralized UI Text**: The introduction of `TextConstants.ts` indicates a pattern of centralizing all user-facing strings and error messages. This practice improves code organization, makes it easier to modify or translate UI text, and ensures consistency across the application.
*   **Robust Merchant Health Checks**: The `ApiService.ts` frequently updates and utilizes a list of `merchantHealthCheckEndpoints`. This highlights a recurring focus on monitoring critical API interactions and redirecting users if underlying services are unhealthy. The expansion of these checks to `APIConfig.login.validateToken` signifies an increased scope of what is considered vital for a smooth checkout experience.
*   **Debugging and Logging**: The repeated appearance and adjustments of `console.log` statements within `ApiService.ts` suggest an active development environment where detailed logging is used for debugging and monitoring API call flows.