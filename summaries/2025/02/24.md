# Activity Summary for 24/02/2025

## 02:10:47
The provided log shows multiple revisions to two files: `/Users/madav/Documents/checkout UI/gokwik.pdp/src/App.svelte` and `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts`.  Both files were heavily modified between 23/02/2025, 23:44:47 and 24/02/2025, 00:09:09.

`/Users/madav/Documents/checkout UI/gokwik.pdp/src/App.svelte` primarily handles the checkout UI logic.  The numerous revisions suggest iterative development and debugging. The code heavily relies on Svelte stores (`store_...`) for managing application state, indicating a reactive architecture.  These stores manage data related to user login, addresses, order details, payment options, and various flags for UI elements and features (e.g., discount banners, loading screens). There's substantial interaction with various services (e.g., `MerchantAPI`, `EventService`, `Experiment.service`), showcasing integration with backend systems for data fetching and event tracking. The code includes handling of messages from iframes (`window.addEventListener('message'`) which suggests a complex integration workflow.  The frequent changes in this file point to ongoing development and refinement of checkout processes and features.

`/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts` manages environment-specific configurations.  The file was repeatedly updated,  primarily altering the URLs used for different environments (development, QA, sandbox, production).  The `api_url`, `experiment_url`, `analytics_api`, and other functions define different endpoints based on the `env` variable, which is obtained from the `LoginStore`. Multiple API endpoints for various services are defined and selected based on the current environment.  The repeated revisions indicate adjustments to API endpoints across multiple environments, potentially due to deployment changes or API updates. The changes in `setCart()` function within this file show the cart object being updated multiple times with varying numbers of items (22, 12, 5) and total prices (972800, 970800, 404500), suggesting testing or development of different scenarios. The consistent use of `'https://qa-core-api.dev.gokwik.in'` in the `local` environment setting within `api_url` might be a bug or a temporary setup for local testing.


## 11:11:37
The `/Users/madav/Documents/checkout UI/gokwik.pdp/src/App.svelte` file was updated on 24/02/2025 at 10:49:39.  This update significantly revised the Svelte component's logic, primarily focusing on checkout functionality.

The changes involve extensive use of numerous Svelte stores (`store_...`) from `./common/stores/LoginStore` and `./common/stores/CommonStore` and `./common/stores/OrderStore`, managing various aspects of the checkout process, including user information, address, payment options, order details, and discounts.  The component imports numerous other Svelte components for UI elements like address input, snackbars, headers, and various payment options screens.


The `onMount` lifecycle hook handles browser history management, preventing accidental navigation away from the checkout flow.  It also listens for `message` events, presumably from an iframe, to receive launch data containing crucial information like:

* **Merchant Information:**  `store_merchantInfo`, `store_mid`, `store_merchanturl`.
* **User Data:**  `store_isAbandonCart`, `store_phoneNo`, potentially others.
* **Payment Information:** `store_paymentLink`, `store_upiPaymentOptionsAvailable`.
* **Cart Information:** `store_cartjsObject`, `store_cartId`.
* **Environment Details:** `store_environment`, `store_isGlanceEnvironment`, `store_gaCookies`.
* **Token information:** `store_soToken`, `store_kwikpassToken`, `XGokwikToken`, `XKWIKPASSToken`.

This launch data is then used to populate the various stores and initialize the checkout process.  Error handling (`APIErrorHandling`) is implemented to manage potential issues, and various services are called (`fetchShopifyCart`, `getRequestId`, `getAbandonCart`) to fetch necessary data from the backend.

The code includes logic to handle different payment methods (UPI, net banking, card payments, BNPL), various discount calculations and applications, and interactions with different third-party services, including Webengage and potentially Shopify, as evidenced by the presence of functions like `initTracking` and calls to a Shopify API.  There's significant logic to handle cart validation, including checks for empty carts,  and managing the state of the checkout process across various screens (`store_page`).  The code also includes significant experiment tracking using stores like `store_userExperiments`.  Finally, numerous helper functions (`setViewProperties`, `setCookie`, `getCookie`, `insertGtmScript`, `getSearchParams`) are used for various tasks.
