# Activity Summary for 30/04/2025

## 12:50:37
The log shows multiple updates to `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/OrderSummary.svelte` between 12:05:37 and 12:50:03 on April 30, 2025.  These changes primarily focus on refining the calculation and display of the `totalPrice` within the Order Summary component.  Specifically, the calculation of `totalPrice` was repeatedly adjusted to incorporate various discounts (coupon, prepaid, reward-based, Shopify store credit, Gyftr), COD charges (with conditional logic based on the page number and application state), GST, and shipping charges (depending on whether shipping is treated as a product).  The `loyaltyDisplayAmount` variable was also introduced and refined to calculate loyalty discounts based on `totalPrice` and shipping cost.  The code also includes numerous subscriptions to Svelte stores to track changes in cart items, discount amounts, and other relevant data, triggering recalculations and UI updates.  The updates show an iterative process of improving the accuracy and comprehensive nature of the order summary's price calculation.  A `console.log` statement repeatedly logging `totalPrice` or `loyaltyDisplayAmount` suggests debugging or monitoring of these values during development.

The file `/Users/madav/Documents/checkout UI/gokwik.pdp/public/merchant.html` was updated once at 11:55:27 on April 30, 2025.  This update modifies the merchant's HTML page, primarily involving Javascript code to handle communication with a Gokwik SDK for checkout functionality.  It includes initialization of the SDK (`gokwikSdk.init()`), functions for payment processing, event handling, and cookie management to track landing pages and referrer information. The script contains commented-out code that suggests experimentation with different loading methods for the Gokwik JS file.  A commented-out analytics script also hints at A/B testing or feature toggling related to analytics implementation. The code sets cookies to store the `gk_landing_page` and `gk_orig_referrer` for tracking purposes.

The `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts` file was updated twice, at 11:55:12 and 11:56:20 on April 30, 2025.  Both updates involve setting up environment-specific base URLs for various APIs (health, address suggestions, main API endpoints, analytics, etc.).  The code extensively uses conditional statements to determine the appropriate URL based on the `env` variable (which represents the current environment, e.g., 'local', 'dev', 'qa', 'sandbox', 'production'). There's a large conditional block inside the `api_url` function which suggests handling of many different environments and their respective API endpoints.  The function `setCart` was modified and shows different cart objects between the two updates.


## 13:50:17
The `/Users/madav/Documents/Dashboard/checkout-dashboard-ui/src/library/components/integrations/formRender.tsx` file underwent several revisions on April 30th, 2025.

The first change at 13:12:02 involved the initial creation or significant update of the `RenderForm` component. This component uses the `gokwik-ui-kit` library and `react-redux` for rendering a form. It includes various input types (switch, input, inputNumber, select), tooltips, and conditional rendering based on user configuration (`userConfig` from `react-redux`).  The code also defines alert messages (`eddAlerts`, `pincodeAlerts`, `bulkProviderAlerts`) with links to relevant settings pages.  `loyaltyInputs`, `rewardInputs`, and `creditsInputs` arrays define the structure and properties of input fields related to loyalty programs, gift cards, and store credits.


The second modification at 13:17:02 added an import for `GiftCard` from `@public/assets/giftCard.png` and introduced a new state variable `[showImage, setShowImage]` in the `RenderForm` component, although its usage isn't shown in the provided code snippet.

The final update at 13:21:15 added a `checkbox` input to the `loyaltyInputs` array, allowing for sales channel control ("Website" and "Mobile Application") for loyalty points.  A `rules` property with a `required` validation was also added to this checkbox input.  The code remains largely focused on form rendering and configuration options for loyalty points, gift cards, and store credits.  The consistent use of tooltips to provide detailed explanations for each configuration option is notable.  The overall pattern shows incremental improvements and additions to the form's functionality and user interface.


## 16:36:33
The commit on `formRender.tsx` at 30/04/2025, 15:36:32 significantly updates the component responsible for rendering a form.  The changes primarily involve adding extensive configuration options related to loyalty programs and gift cards.  These options are implemented using various form elements from `gokwik-ui-kit`, including switches, inputs, selects, and tooltips.  The code introduces several new components such as `MaxRedeemableEasyRewardsTooltip` providing detailed explanations for input fields.  Alert messages (`eddAlerts`, `pincodeAlerts`, `bulkProviderAlerts`) are incorporated to guide users based on their configuration and onboarding status. The `RenderForm` component now accepts a `resetFields` prop for improved form management.  There's extensive use of nested arrays for naming conventions in form fields (`['custom_config', 'enable_cod_with_loyalty']`), suggesting a hierarchical structure for configuration data.  The code also uses React's `useSelector` hook to access user configuration data from Redux store and includes several conditional rendering blocks based on user configuration (`userConfig`).  The addition of input validation rules using `validator` functions adds robustness to the form handling.  The styling appears to use a CSS-in-JS approach with classes such as `flex`, `flex-col`, and `text-sm`. Finally, conditional rendering based on the `userConfig` object is used to dynamically adjust links and components depending on user settings (e.g., DIY enabled status).


## 17:36:35
The `ShippingDiscount.service.ts` file (last updated April 30, 2025, 17:14:25) manages shipping discounts and related functionalities.  It heavily uses observable stores (`store_*`) from `CommonStore` and `OrderStore` to manage application state, including data like discount codes, shipping options, addresses, and cart information.  The core functionality is provided by `callShippingDiscountApi` which makes an API call (`discountShippingCall`) to fetch shipping discounts based on provided parameters (body, including intent, coupon code, remove_coupon_code).

The response is then processed in `processShippingDiscountResponse`, updating various stores based on the API's success or failure. Error handling involves setting appropriate snackbar messages and managing loader states.  The code incorporates features such as confetti effects on successful discount application, loyalty point logging, gift card reapplication, and handling of various edge cases (like `discount_shipping_retry`,  invalid channels, and different page contexts).  There's significant logic around handling shipping options, setting delivery estimates (`setDeliveryEstimate`), and updating the cart (`updateCart`). The code also interacts with analytics services (`fireGtmEvent`, `logEvent`, `stabilityEvent`, etc.) and other services such as `PaymentOptions.service` for payment method calls.  The extensive use of observables and callbacks implies a reactive architecture.  The code contains multiple checks for `currentPage` suggesting a multi-step checkout flow.  Several constants and functions are imported from other modules including `TextConstants`, `Discounts.service`, and `Helper.service`.  Custom configuration options are fetched from `store_requestIdObject`.


## 18:36:31
The `formRender.tsx` component was updated on April 30th, 2025 at 17:57:12.  This update focuses heavily on rendering various form elements related to checkout configurations, specifically concerning loyalty programs, gift cards, and store credits.

The component utilizes the `gokwik-ui-kit` for UI elements (Alert, Button, Form, Input, etc.) and `react-redux` for state management.  It dynamically renders form inputs based on configuration data (`customConfig`, `merchantConfig`, etc.), fetched via `useSelector(getUserConfig)`.

Significant changes involve the addition of numerous form input components (`switch`, `input`, `select`, `inputNumber`) within arrays (`loyaltyInputs`, `rewardInputs`, `creditsInputs`).  These inputs manage settings for enabling/disabling COD with loyalty points/gift cards/store credits, stacking discounts, auto-applying credits, and customizing loyalty point display names.  Extensive tooltips provide detailed explanations for each setting.

Several alert arrays (`eddAlerts`, `pincodeAlerts`, `bulkProviderAlerts`) are defined to provide contextual information and links to relevant settings pages within the application. These alerts consistently guide the user to configure integrations with external partners.

The `pincodeConfigData` object defines options and validation rules for handling pincode input, including options for different country code formats.  A `MaxRedeemableEasyRewardsTooltip` component is introduced to clarify formatting rules for specifying maximum redeemable credit values. The `resetFields` prop was added to the `RenderForm` component, likely to allow for resetting form values on specific pages.  The code extensively uses nested arrays to manage the form field names, reflecting a hierarchical structure for configuration settings.


## 18:36:36
The log shows multiple revisions to two files: `/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts` and `/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/Discounts/Discounts.svelte`.  The `.gitignore` file was also modified several times, likely to refine its exclusion patterns.

**`/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts` (30/04/2025, 17:37:56):** This file defines functions to retrieve base URLs for various APIs and services based on the current environment (e.g., 'dev', 'qa', 'production', 'local').  It uses a reactive approach, subscribing to environment variables to determine the appropriate URLs. The file contains a large number of conditional statements to set URLs for different environments and services (health service, address suggestion, API, Cred URL, experiment URL, twidpay API, kp API, CDN path, analytics API and analytics API V2, merchant URL, merchant URL API, XGokwikToken, XKWIKPASSToken).  A `setCart` function is also included, initializing a cart object with sample data.

**`/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/Discounts/Discounts.svelte`:** This Svelte component manages discount application during checkout.  Multiple updates occurred, primarily focusing on enhancing discount logic, handling various discount types (including one-click coupons, gift cards, and stacked discounts), integrating with various services (`Discounts.service`, `WalletCredits.service`, `ShippingDiscount.service`, `MerchantAPI`), and updating UI elements based on discount application status.  The most recent update (17:44:05) adds the `checkWhitelistedAutomaticDiscount` function import, suggesting improvements in automatic discount management and potentially added more robust handling of whitelisted automatic discounts. The component subscribes to numerous stores for state management and includes detailed handling of various discount scenarios.  The initial version (17:40:48) lacks the `checkWhitelistedAutomaticDiscount` import, highlighting a later addition related to whitelisted discounts.  The component is heavily reliant on various services and store subscriptions to manage the discount application workflow.


## 20:30:19
The log shows code changes across several files within a checkout dashboard application.  Significant changes occurred around 20:03 and 20:12 on April 30th, 2025, primarily affecting `/Users/madav/Documents/dashboard_checkout/dashboard-ui-configuration/src/index.ejs`.

`/Users/madav/Documents/dashboard_checkout/dashboard-ui-configuration/src/index.ejs` underwent multiple revisions. These revisions involved modifications to the import map within the `<script type="systemjs-importmap">` tags, dynamically adjusting the URLs based on the `deployedEnv` variable (dev, qa, sandbox, production) and `isLocal` flag. The changes demonstrate a system for loading different versions of the application's modules depending on the environment.  The production environment includes additional scripts for Clarity and New Relic monitoring.  One notable change between versions was updating the  `@gokwik/checkout` URL from a localhost address to a production-like URL in the 20:03:27 revision. Later revisions, at 20:12:56, further altered import URLs for certain modules, indicating a shift in configuration and potentially a switch to the QA environment based on the `.env` file update.


`/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/settings/shipping-settings/shipping-component/shippingBasedMethods.tsx` shows a React component for configuring shipping methods. This component uses the `gokwik-ui-kit` library and handles features like adding, editing, and deleting shipping configurations,  including advanced conditions, payment options, and user-type-based discounts. The code suggests a system for uploading pincode data via CSV files.  The timestamp indicates this file was updated much later in the log at 20:27:15.


The `.env` files (which are excluded from the summarization due to potential sensitive information) appear to control environment variables such as `ENVIRONMENT` and  possibly API URLs (based on the content of `checkout-dashboard-ui/.env`).
