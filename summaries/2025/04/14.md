# Activity Summary for 14/04/2025

## 22:40:50
The code is a TypeScript file (`CleverTap.ts`) that handles sending analytics events to CleverTap.  The file was last updated on April 14, 2025, at 22:37:03.  The core functionality involves mapping data fields to CleverTap's expected format using `mappedKey` and sending events based on different actions (e.g., `phoneNumber`, `mobileAddedGK`, `paymentCompleted`).

Several functions (`cleverTapPhoneNumber`, `cleverTapMobileGK`, `cleverTapPincode`, `clevertapPaymentMethod`, `cleverTapPaymentCompleted`, `cleverTapUserAddress`, `cleverTapUserAddressDetailed`) are dedicated to preparing and pushing specific event data to CleverTap.  These functions share a common pattern: they create a data object (`dataObj`) conforming to CleverTap's requirements, and often include product information (`commonAnalyticsData.products`), user details (phone number, address, etc.), and marketing data (UTM parameters).  The `pushCleverTap` function handles the actual event pushing, with conditional logic to split product array into multiple events if specified in `eventData.analyticsPixelObj.clevertap.split_product_array_to_multiple_events`.

A significant amount of conditional logic exists, primarily handling differences in event structure based on whether the code is running on a specific domain (e.g., 'levi'). There is also key mapping (`mappedKey`) to ensure consistency between the internal data and CleverTap's expected fields.  The code extensively uses string manipulation and JSON.stringify to format data.  The `convertSpecificKeysToStrings` function (not shown) is crucial for data type conversion before being sent to CleverTap.  The file makes use of a `phoneFormatter` function from `merchant/services/Helper.service`.
