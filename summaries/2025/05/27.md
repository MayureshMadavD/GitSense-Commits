# Activity Summary for 27/05/2025

## 01:06:27
The `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/store/discounts/index.ts` file, last modified on 27/05/2025 at 00:45:01, contains Redux logic for managing discounts.  Key functionalities include fetching manual and Shopify discounts, handling bulk discounts (including download and deletion), saving and updating discounts, and fetching customer segments.

The code uses `createAsyncThunk` extensively for asynchronous operations, making API calls to endpoints defined in `APIEndPoints`.  These endpoints appear to be related to DIY discounts, bulk discounts, and Shopify integration.  Error handling is implemented using `rejectWithValue` and informative messages from `gokwik-ui-kit`.  The code interacts with a backend API using `makeAPICall` and handles various responses, including success and error scenarios.  Significant operations such as fetching, saving, and deleting discounts are implemented with separate async functions.  Helper functions like `fetchAllBulkCampaigns`, `fetchBulkCampaign`, and `handleDownloadBuk` manage interactions with the bulk discount system.  The code also incorporates Shopify-specific features using functions such as `fetchShopifyDiscountsDataAsync` and `shopifyResponseMap`.  The `saveDiscount` function handles both creating and updating discounts, distinguishing between different page contexts and sub-methods (e.g., bulk discounts).  Data mapping and transformation are performed using functions like `requestMapDiscount` and `responseMapDiscount`.  Finally, the code maintains state using `createSlice` and interacts with the root store (`RootStoreType`).


## 02:06:19
The log shows code changes across three files on May 27, 2025.

`/Users/madav/Documents/checkout UI/gokwik.pdp/public/merchant.html` (01:28:53): This file is an HTML page likely representing a merchant's checkout interface.  It includes a button triggering a `goKwikCheckout()` function which sends `merchantInfo` via a `window.postMessage` call.  The `merchantInfo` object contains various identifiers (like `mid`, `appid`, `appsecret`, `storeId`, `fbpixel`), and environment details.  The code also manages cookies (`gk_landing_page`, `gk_orig_referrer`) and dynamically loads JavaScript from `http://localhost:8080/build/gokwik.js`.  A significant portion of the code deals with handling different merchant IDs (`mid`) for various environments (production, sandbox, QA, etc.).  The code also includes a commented-out analytics script and a subsequently added inline script for a custom event listener.

`/Users/madav/Documents/checkout UI/gokwik.pdp/src/common/services/EnvironmentService.ts` (01:29:20 & 01:29:37): This TypeScript file manages environment-specific configurations.  It defines functions to retrieve base URLs for various services (health check, address suggestions, API calls, analytics, etc.) based on the environment variable `env`.  The `env` variable can take values like 'local', 'dev', 'qa', 'sandbox', 'production', and several other variations.  Each environment is mapped to different API endpoints.  A `setCart` function initializes a cart object with sample data.  The file also defines functions to retrieve tokens (`XGokwikToken`, `XKWIKPASSToken`) that vary based on the environment.  The most significant change between the two timestamps is a change in the `api_url` function, where the base URL for a `local` environment is changed from `http://localhost:3000` to `https://api.gokwik.co`.

`/Users/madav/Documents/checkout UI/gokwik.pdp/src/Components/place-order/OrderSummary.svelte` (01:30:56): This Svelte component renders an order summary. It uses various stores from `LoginStore` and `CommonStore` to display order details, including subtotals, discounts, shipping, taxes, and loyalty points. The component handles updating the total price based on various factors like prepaid discounts, COD charges, and gift cards. It also includes event tracking using `fireGtmEvent` and `fireAnalyticsGa4`.  The component dynamically adjusts based on the current page (`$store_page`).  There is complex logic to handle cart updates, free products, and various discount types.  The component also renders other sub-components like `Discounts`, `TotalContainer`, `Promotion`, etc.
