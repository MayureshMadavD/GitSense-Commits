# Activity Summary for 21/05/2025

## 00:15:19
The log shows a series of rapid code changes made to `/Users/madav/Documents/mint-dashboard/app/ui/dashboard/merchants/merchant.jsx` and `/Users/madav/Documents/mint-dashboard/app/dashboard/page.jsx` between 23:57 on May 20, 2025 and 00:13 on May 21, 2025.  The majority of changes center around `/Users/madav/Documents/mint-dashboard/app/ui/dashboard/merchants/merchant.jsx`, which appears to be a React component responsible for displaying and managing merchant data.


`/Users/madav/Documents/mint-dashboard/app/ui/dashboard/merchants/merchant.jsx` modifications:

* **Initial version (20/05/2025, 23:57:00):**  This commit established the base component, including Ant Design components (Button, Col, Form, etc.),  hooks (useEffect, useState, useRef), custom components (MerchantStatusBar, FormRenderer), functions for data manipulation (`convertStringtoArray`, `createOptionsListForFilter`, etc.), and backend query functions (`createNewMerchant`, `deletEntryForMerchant`, `updateMerchantByID`). The component renders a table with merchant data and includes functionality for adding, editing, and deleting merchants.  The `formFeilds` array defines the form fields for merchant data input.


* **Subsequent commits (21/05/2025, 00:00:36 - 00:11:14):** These commits iteratively refined the "CE Name" field within the `formFeilds` array.  The initial changes involved adjusting how the options for this select field were generated, initially from `merchantData` and later directly from `allUserList` via mapping usernames.  The visibility logic of this field (`hidden` property) based on user roles (`currentUser?.isAdmin` and `currentUser?.Profiledetails?.islead`) was also tweaked several times. Finally, `inputProps` were added to allow for searching within the select field.



`/Users/madav/Documents/mint-dashboard/app/dashboard/page.jsx` modifications:

* **Initial version (21/05/2025, 00:10:27):** This commit introduced a server-side component fetching and filtering merchant data based on user ID, admin status, and optional date range parameters (`start`, `endDate`, `mode`). It then renders the `DashboardMain` component with the filtered data. The filtering logic handles filtering by `livedate`, `kickoff`, and `targetgolive` based on the `mode` parameter.

* **Subsequent commit (21/05/2025, 00:11:46):** This minor commit removed unnecessary Ant Design imports (`Col`, `Row`) simplifying the component structure.



`/Users/madav/Documents/mint-dashboard/app/ui/dashboard/dashBoardMain.jsx` modifications:

* **Multiple commits (21/05/2025, 00:09:20 - 00:13:38):** These commits involved refinements and debugging of the `DashboardMain` component,  which displays dashboard cards and charts. The primary changes focus on logging statements added for debugging purposes (`console.log`) and a typo correction (`consle` changed to `console`). The logging of `alltheMerchantList` was switched to logging `chartData` in the last commit.  A loading indicator (`LoadingFunction`) is used while data is fetched.


Overall Pattern:

The changes reflect an iterative development process, focusing on improving the merchant data display and filtering capabilities of the dashboard.  The rapid sequence of commits suggests debugging and refinement of the UI component (`merchant.jsx`) and data fetching/filtering logic in the server component (`page.jsx`). The use of Ant Design, React hooks, and custom functions demonstrates a structured approach to building the application.


## 05:19:29
The code is a TypeScript file (`CleverTap.ts`) that integrates with CleverTap, an analytics platform.  The file, updated on 21/05/2025 at 05:18:58, contains functions to track various events throughout the checkout process.  These events include user phone number entry (`phoneNumber`), mobile addition (`mobileAddedGK`), pin code entry (`pinCode`), payment method selection (`paymentMethod`), payment completion (`paymentCompleted`), user address entry (`userAddress`, `userAddressDetail`), and checkout start (`checkoutStarted`), as well as coupon application success/failure (`coupon_applied_success_gk`, `coupon_applied_failed_gk`).

The `pushCleverTap` function is central, sending data to CleverTap. It handles events differently based on a `split_product_array_to_multiple_events` flag, either pushing a single event or multiple events for each product.

A significant portion of the code maps internal data keys to CleverTap's expected keys (`mappedKey`). This mapping is consistently used across various event tracking functions.  Data transformation, particularly converting specific keys to strings (`convertSpecificKeysToStrings`), is also prominent.

Several functions (`cleverTapPhoneNumber`, `cleverTapMobileGK`, `cleverTapPincode`, `clevertapPaymentMethod`, `cleverTapPaymentCompleted`, `cleverTapUserAddress`, `cleverTapUserAddressDetailed`, `cleverTapDiscountEvent`) build event data objects tailored to their respective event types.  These often include user details (name, phone, email, address), product information, order details, and marketing data (UTM parameters).  Conditional logic is used to handle different scenarios (e.g., Levi's specific handling, sandbox environments).  The code shows considerable effort in formatting phone numbers and handling potential `null` or `undefined` values.  There's also  conditional logic based on the origin of the `window.location` to tailor CleverTap event data for various domains (e.g., 'levi', 'snitch', 'sandbox-plus').
