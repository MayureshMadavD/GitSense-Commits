# Activity Summary for 27/01/2025

## 11:04:07
The `/Users/madav/Documents/mint-dashboard/app/api/sendemail/route.ts` file, updated on 27/01/2025 at 10:09:34, is an API route handling email sending for daily and weekly reports.  The key functionality revolves around scheduled tasks using `node-cron`.

**Key Changes/Features:**

* **POST Request:**  Accepts image data, header name, and report ID (1 for daily, 2 for weekly) to save report data.  It uses the `pngReportData` function from the backend.

* **Scheduled Tasks:** Uses `node-cron` to schedule:
    * A daily report task running at 1:30 AM UTC (Asia/Kolkata timezone). This fetches daily reports, filters for non-'NA' entries, and sends an email using the `sendEmailForReport` function.  If sending is successful, it deletes the report data using `deletepngReportData`.
    * A (commented-out) weekly report task running at 1:00 AM UTC on Mondays.  The logic is similar to the daily task, but uses `getPreviousDate` and filters for weekly reports.

* **Email Sending:** The `sendEmailForReport` function uses `nodemailer` to send emails.  The email contains an embedded image from the base64 encoded `imageData`. It retrieves email credentials from environment variables (not shown due to security concerns).

* **Data Handling:** Functions `getPngReportByTodayDate` and `deletepngReportData` interact with a database (presumably) to manage report data.  `getCurrentDate` and `getPreviousDate` handle date retrieval.

* **GET Request:** A GET request triggers the `dailyReportTriggerTime` function, which sets up the cron job for daily reports and returns the current date and time.

In essence, this code implements a system for automatically generating and emailing daily and weekly reports based on data stored in a backend database.  The commented-out weekly report task suggests it might be under development or temporarily disabled.  The significant timestamp is 27/01/2025, 10:09:34, reflecting the last update to this file.
