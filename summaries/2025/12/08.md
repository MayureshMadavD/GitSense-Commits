# Activity Summary for 08/12/2025

## 13:37:04
The `local.properties` file in the `example/android` directory underwent two quick updates on April 12, 2025. Initially, at 15:06:18, the `sdk.dir` property was set to `/Users/mac/Library/Android/sdk`. This was subsequently changed at 15:06:37 to `/Users/mayuresh.madav/Library/Android/sdk`, indicating a modification to the local Android SDK path.

A significant update occurred at 15:23:24 on April 12, 2025, within the `example/src/screens/app/Checkout.tsx` file. This file introduces a React Native `Checkout` screen responsible for handling a checkout flow. Key aspects of this change include:
- Importing and utilizing components and functions from a local SDK (`../../../../src`), specifically `KPCheckout` and `getCheckoutMultiPassToken`.
- Implementing an `handleEvent` function to manage various checkout states:
    - Displaying an `Alert` for `checkout-initiation-failure`.
    - On `orderSuccess`, it checks for a `gk_access_token` and, if present, calls `getCheckoutMultiPassToken` with user details (phone, email) before logging the response.
    - It triggers `navigation.goBack()` for `order-complete`, `modal_closed`, `checkout-close`, and `orderSuccess` events.
- Providing `handleError` and `handleNavigationState` functions for comprehensive logging of errors and WebView navigation state changes during the checkout process.
- The `KPCheckout` component is rendered with `checkoutData` that includes `merchantParams` specifying a `cartId` (e.g., `gid://shopify/Cart/...`).
- The component itself is memoized using `memo` for performance optimization.

**Patterns and Recurring Elements:**
- All recorded changes occurred on the same day, April 12, 2025, within a short timeframe (approximately 17 minutes).
- The file paths indicate these changes are part of an example application (`kwikpass-app-rn/example`) demonstrating the usage of a `kwikpass` SDK.
- The `Checkout.tsx` file heavily relies on logging (`console.log`) for debugging and monitoring, specifically using `JSON.stringify` to log object details for events, errors, and navigation states.

## 13:41:02
**File: `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/upsell/upsellCheckout.tsx`**

This file, primarily dealing with Upsell rule management on the checkout dashboard, underwent several small, iterative changes on **04/12/2025** between **11:21:12** and **11:37:15**.
- **Collapsible Rule Rendering Logic**: The `children` prop of the `Collapse` component within `buildUpsellCollapse` was frequently adjusted. Initially, it used `index === 0 ? index : index - 1`, then `index === 0 ? index : rules.length`, before stabilizing on simply `index` for determining the `UpsellFormRenderer`'s `index` prop.
- **"Add New Upsell Rule" Button Behavior**: The logic for setting the active key after adding a new upsell rule changed from activating the newly added rule (which would be at `upsellItems.length`) to always activating the first rule (`'0'`).
- **UI Layout for Adding Rules**: A significant visual change occurred around **11:37:15** where the "Add New Upsell Rule" button was re-positioned to appear *before* the list of existing upsell rules, enhancing user flow for adding new configurations.

**File: `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/discounts/productSearch.tsx`**

On **04/12/2025, 12:27:04**, a `topUpGift` boolean prop was added to the `ProductSearch` component's interface. This prop is used to conditionally display a "Freebie" text within the component's rendering logic, suggesting an extension to support free gift product search and display functionality.

**File: `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/utilities/api.ts`**

This utility file handles API calls for product, collection, and upsell data.
- **04/12/2025, 12:27:19**: The `getVariantNCollectionDetailsbyId` function was enhanced to support fetching product details using `product_query` for `getProductById` and improved data mapping for variants and collections. The `fetchShopifyCollectionsOrProducts` function was updated to filter products by `status === 'active'`.
- **06/12/2025, 20:07:40 - 06/12/2025, 20:55:14**: The `fetchProductById` (later renamed `fetchProductByVaraintId`) function within `freeGift.tsx` was modified to use `APIEndPoints.getVariantById` instead of `APIEndPoints.getProductById` and adjust its payload to `variant_id: payload.map(String)`, indicating a shift to variant-specific data fetching for free gifts.

**File: `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/utilities/constants/apiEndpoints.ts`**

On **04/12/2025, 12:27:30**, new API endpoints for `checkoutLinks` (list, get by ID, create, update) were introduced. Additionally, specific endpoints for `getVariantById`, `getCollectionById`, and `getProductById` were added or updated. A notable change on **06/12/2025, 19:02:34** was the removal of the `upsellCheckout` endpoints (`getandDeleteUpsellData`, `updateUpsellData`) from this file, suggesting a restructuring or deprecation of how upsell API endpoints are managed.

**File: `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/utilities/helpers/helper.ts`**

This file contains various helper functions.
- On **06/12/2025** between **20:07:40** and **20:08:56**, a new helper function `extractVariantIdsFromRules` was added. This function likely assists in processing rule sets to extract relevant variant identifiers, which is then imported and used in the `freeGift.tsx` component. No other significant changes were observed for this file.

**File: `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/store/customize-ui/index.ts`**

On **04/12/2025, 12:28:12**, the `upsell_data` structure within the Redux `initialState` was expanded. It now explicitly includes `upsell_product_list` and `products` fields, each with a `data` array, along with `discount` properties (`value`, `capping`), `title`, and `upsell_items`. This indicates a richer data model for managing upsell configurations in the UI state.

**File: `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/library/components/upsell/upsellFormRenderer.tsx`**

This component is responsible for rendering individual upsell rule forms and saw several updates on **04/12/2025** between **22:18:10** and **22:21:01**.
- **Form Initialization Logic**: An `useEffect` hook was added to handle the initial population of the form fields based on existing upsell rules, including fetching product/collection details using `getVariantNCollectionDetailsbyId` (which dynamically uses 'variant', 'product', or 'collection' types). It ensures that `applicable_items` are correctly set, defaulting to 'all' if no specific products/collections are defined.
- **Discount Price Checkbox Logic**: The `onChange` handler for the "Configure upsell items on discount price" checkbox was modified. Initially, it only logged the event. Later, logic was added to reset `discount.value` and `discount.capping` to `0` when the checkbox is *unchecked*, effectively clearing discount fields when the feature is disabled.

**File: `/Users/mayuresh.madav/Documents/dashboard/checkout-dashboard-ui/src/pages/settings/free-gift/freeGift.tsx`**

This file, managing the "Free Gift Settings" page, experienced numerous updates, particularly on **05/12/2025** and **06/12/2025**.
- **Initial Setup and Form Fields**: The component sets up a form with fields for creating and managing free gift rules, including rule name, sales channels (app, web, agent-led), purchase requirements (cart value, quantity), min/max values, applicability (all products, specific products/collections), free gift product selection, quantity, price, and application method (auto/selection). Breadcrumbs were initialized to reflect the page path.
- **Product Fetching for Free Gifts**: A local `fetchProductById` (later `fetchProductByVaraintId`) function was introduced around **06/12/2025, 19:07:00** to fetch product details. This function was subsequently updated on **06/12/2025, 20:07:40** to fetch by `variant_id` instead of `product_id` using `APIEndPoints.getVariantById`, and the payload was adjusted accordingly. This indicates a shift to more granular variant-level control for free gift products.
- **`handleEdit` Function Logic**: The `handleEdit` function was refined to filter out the 'shopify_agent' sales channel option if the `application_method` of the edited rule is not 'auto', preventing incompatible configurations.
- **Frequent Minor Commits**: A recurring pattern observed across many timestamps (e.g., **05/12/2025, 23:50:25** to **05/12/2025, 23:55:46**, and multiple blocks on **06/12/2025**) involved little to no functional code changes. These likely represent frequent saves, minor formatting adjustments, or commits with no significant delta. A `console.log(specificProducts,"Specific Products")` was added around **06/12/2025, 20:26:15** for debugging.
- **Helper Import**: The `extractVariantIdsFromRules` helper from `library/utilities/helpers/helper.ts` was imported around **06/12/2025, 19:29:38**, signifying its planned or actual use in processing free gift rules.

**Patterns and Recurring Elements Across Changes:**
- **Modular Component Design**: Heavy reliance on reusable components like `ProductSearch` and `RenderField` for consistent UI elements and form field rendering.
- **Form Management with Ant Design (Form.useForm, Form.useWatch)**: Consistent use of Ant Design's form utilities for state management and reactive form updates.
- **Redux Integration**: `useDispatch` and `updateUpsellState` are used to manage global state related to UI customization, indicating a Redux-based state management approach.
- **API Interaction**: Direct use of `makeAPICall` and `APIEndPoints` for fetching and pushing data, typically within `useEffect` hooks or form submission handlers.
- **Iterative UI Refinements**: Multiple small changes focusing on improving user experience, such as adjusting UI element order or refining form field behavior (e.g., checkbox logic, index handling for collapsible items).
- **Debugging Statements**: Presence of `console.log` statements in various files, indicating ongoing development and debugging efforts.
- **Emphasis on Product/Variant-level Control**: Evolution of API calls and data handling to move from broad product-level identification to more specific variant-level details, particularly evident in `freeGift.tsx` and `api.ts`.

## 14:05:54
The code changes primarily focus on the `KwikPassCheckout` component, its associated internal checkout logic, and minor configuration updates.

**File-specific Updates:**

*   **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/packages/kwikpassV2/src/components/KwikPassCheckout.js`** and **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/src/kwikpassV2/src/components/KwikPassCheckout.js`**:
    *   **Timestamp Range:** 27/11/2025, 18:51:28 to 01/12/2025, 18:04:25.
    *   This component, responsible for integrating the KwikPass checkout experience within a React Native application, underwent extensive and iterative development.
    *   **`onEvent` Handler (especially `orderSuccess` case):** This was the most actively modified section.
        *   Initial implementations (27/11/2025, 18:51:28) involved extracting `orderID` from a GraphQL GID and `orderKey` from the `checkoutUrl` using regex, then dispatching a `SET_ORDER_COMPLETE` action. User login (`KWIKPASS_LOGIN`) was also handled if the user wasn't already logged in.
        *   Several changes involved refining the regex for `orderKey` extraction, including attempts to use `orderKeyRegex` and `orderKeyRegexExtra` (e.g., 27/11/2025, 23:16:36).
        *   There were multiple attempts to normalize the `checkoutUrl` by ensuring it starts with `https://` (e.g., 28/11/2025, 00:25:40, and subsequent minor refinements).
        *   **Significant shifts in `orderSuccess` handling:**
            *   At 27/11/2025, 23:30:22, the `orderKey` extraction was removed, and instead of `SET_ORDER_COMPLETE` with `orderKey`, an `OPEN_IN_WEBVIEW` action was dispatched to redirect to the `checkoutUrl`.
            *   This was largely reverted at 27/11/2025, 23:50:11, bringing `orderKey` extraction and `SET_ORDER_COMPLETE` back into focus.
            *   Another major change at 28/11/2025, 12:25:54, saw `checkoutUrl` and `orderKey` extraction being commented out, with the component attempting to construct a generic Shopify thank you page URL (`/thank_you?order_id=`) for `OPEN_IN_WEBVIEW`. The `SET_ORDER_COMPLETE` action was then called with an empty `orderKey`.
            *   Further refinements (e.g., 28/11/2025, 12:41:56) showed `orderKey` extraction conditionally re-enabled, and `OPEN_IN_WEBVIEW` made conditional on `!orderKey`.
            *   By 01/12/2025, 16:14:46, the `orderKeyRegexExtra` and complex `checkoutUrl` prefixing logic were removed, returning to a simpler `orderId` and `orderKey` extraction using a single regex, then calling `SET_ORDER_COMPLETE`.
        *   Debugging `console.log` statements were frequently added, modified (e.g., "Is Coming", "Coming Inside the condition yes yes"), and removed throughout this period, indicating active troubleshooting.
        *   A debugging block to track `gokwik_events` was briefly introduced, corrected for typos, and then commented out (01/12/2025, 17:55:47 to 01/12/2025, 18:02:38).
    *   **File Path Duplication:** For a period (e.g., 27/11/2025, 23:20:30 to 28/11/2025, 00:44:33), changes were logged under both `/packages/...` and `/src/...` paths for `KwikPassCheckout.js`, suggesting either a file move with history or temporary duplication. The `packages` path appears to be the primary one for the later changes.

*   **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/node_modules/@appmaker-packages/extension-kwikpass-expo-package/src/checkout/index.tsx`**:
    *   **Timestamp:** 27/11/2025, 18:54:00.
    *   This file defines the `KPCheckout` React component, acting as a wrapper for the actual `Checkout` component. It mainly passes `checkoutData` and event handlers (`onEvent`, `onError`, `onNavigationStateChange`) to the underlying `Checkout` component. The key change observed is the consistent use of `memo` for optimization. This component remained stable after its initial entry.

*   **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/node_modules/@appmaker-packages/extension-kwikpass-expo-package/src/checkout/Checkout.tsx`**:
    *   **Timestamp Range:** 27/11/2025, 18:57:26 to 27/11/2025, 20:35:26.
    *   This core component handles the WebView rendering of the GoKwik checkout.
    *   **`injectJavaScript`:** Contains JavaScript code injected into the WebView to listen for GoKwik SDK events (`modal_closed`, `orderSuccess`, `openInBrowserTab`) and post messages back to the React Native context. It also includes retry logic for `gokwikSdk` availability and a listener for `gokwikLoaded`.
    *   **UPI App Handling:** Includes `UPI_APP_PACKAGES` mapping and `convertToIntentUrl` / `handlePaymentIntent` functions to facilitate opening UPI apps on Android/iOS for payment, with specific error messages for "UPI_APP_NOT_INSTALLED".
    *   **Checkout Initiation:** The `InitiateCheckout` function constructs the WebView URL based on `merchantType` (shopify or custom), retrieving various merchant-specific configurations and user data from `CacheInstance`. It encodes `storeInfo` and `gkToken` using base64.
    *   **Lifecycle Management:** Uses `useEffect` for `InitiateCheckout` on mount and sets up `BackHandler` and `AppState` listeners to communicate with the WebView.
    *   This file remained stable after its initial comprehensive entries, indicating that the core WebView interaction logic and URL construction were solidified early.

*   **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/packages/kwikpassV2/src/pages/CheckoutOptions.js`**:
    *   **Timestamp Range:** 28/11/2025, 14:48:50 to 28/11/2025, 14:52:20.
    *   This file defines a static configuration object for a "CheckoutOptions" page, specifying that it should render the `kwikpass/checkout` block. Content remained identical across these two entries.

**Timestamps of Significant Changes:**

*   **27/11/2025, 18:51:28:** Initial commit of `KwikPassCheckout.js` with comprehensive event handling.
*   **27/11/2025, 18:57:26:** Initial detailed commit of `Checkout.tsx`, including core WebView injection logic.
*   **27/11/2025, 23:16:36:** Introduction of `orderKeyRegexExtra` for more robust `orderKey` extraction in `KwikPassCheckout.js`.
*   **27/11/2025, 23:30:22:** Major refactor in `KwikPassCheckout.js` for `orderSuccess`, removing `orderKey` extraction and using `OPEN_IN_WEBVIEW` for redirection.
*   **27/11/2025, 23:50:11:** Reversion of the 23:30:22 refactor in `KwikPassCheckout.js`, restoring previous `orderKey` handling.
*   **28/11/2025, 00:25:40:** Added `https://` prefixing logic for `checkoutUrl` in `KwikPassCheckout.js`.
*   **28/11/2025, 12:25:54:** Another major shift in `KwikPassCheckout.js` for `orderSuccess`, opting for a generic Shopify thank you page redirect and an empty `orderKey` for `SET_ORDER_COMPLETE`.
*   **28/11/2025, 12:41:56:** The `orderSuccess` logic in `KwikPassCheckout.js` is adjusted again, conditionally extracting `orderKey` and making `OPEN_IN_WEBVIEW` dependent on its absence.
*   **01/12/2025, 17:58:52:** Final correction of a debugging block for `gokwik_events` in `KwikPassCheckout.js`.

**Patterns and Recurring Elements:**

*   **Focus on Checkout Flow:** The vast majority of changes revolve around the GoKwik checkout process, specifically handling the `orderSuccess` event from the WebView and the subsequent actions in the native app, such as setting order completion or opening URLs.
*   **Iterative Refinement and Debugging:** There's a clear pattern of continuous adjustments, particularly in `KwikPassCheckout.js`, suggesting an iterative process of refining the `orderSuccess` event handling, URL parsing, and action dispatching. Frequent additions and removals of `console.log` statements are indicative of active debugging throughout this period.
*   **Regex for Order IDs/Keys:** Repeated use and modification of regex patterns to extract `Shopify` order IDs from GraphQL GIDs and order keys from `checkoutUrl` is a recurring theme. The challenge of reliably extracting these values is evident in the multiple revisions.
*   **URL Normalization:** Multiple attempts to ensure `checkoutUrl` has a proper `https://` prefix highlight a common issue in handling external URLs.
*   **Conditional Logic:** There's a pattern of refining conditional logic, for example, `if (orderId && orderKey)` vs. `if (orderId || orderKey)` or making actions (`OPEN_IN_WEBVIEW`) conditional on the presence or absence of specific data like `orderKey`.

## 14:37:03
The `local.properties` file, located at `/Users/mayuresh.madav/Documents/sdk/kwikpass-app-rn/example/android/local.properties`, underwent two quick updates on 04/12/2025. Initially, at 15:06:18, the `sdk.dir` property was set to `/Users/mac/Library/Android/sdk`. This was subsequently changed at 15:06:37 to `/Users/mayuresh.madav/Library/Android/sdk`, indicating a shift in the Android SDK directory path, likely reflecting a change in the user's development environment.

A new React Native component, `Checkout.tsx`, was introduced or significantly updated at `/Users/mayuresh.madav/Documents/sdk/kwikpass-app-rn/example/src/screens/app/Checkout.tsx` on 04/12/2025, 15:23:24. This file defines a `Checkout` screen responsible for integrating with a `KPCheckout` component. Key functionalities include:
*   Importing necessary modules like `memo`, `Alert`, `getCheckoutMultiPassToken`, and `KPCheckout`.
*   Implementing an `handleEvent` function to manage various checkout lifecycle events:
    *   `checkout-initiation-failure` triggers an `Alert`.
    *   `orderSuccess` event checks for a `gk_access_token` and, if present, calls `getCheckoutMultiPassToken` with user details (phone, email, access token) and logs the response.
    *   Events like `order-complete`, `modal_closed`, `checkout-close`, and `orderSuccess` (without `gk_access_token` processing) navigate the user back.
*   Providing `handleError` and `handleNavigationState` callbacks for logging errors and navigation state changes within the checkout process.
*   Rendering the `KPCheckout` component with a hardcoded `cartId` in `merchantParams` and attaching the defined event handlers.

The overall pattern observed is a configuration update (Android SDK path) followed by the implementation of a core application feature (a checkout screen with advanced event handling) within a React Native project, both occurring on the same day, suggesting active development and setup for the `kwikpass-app-rn` example.

## 15:05:39
The provided log details code changes primarily focused on the integration and handling of a "GoKwik" checkout flow within an Appmaker-based React Native application, specifically for Shopify merchants.

### File-Specific Updates:

1.  **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/packages/kwikpassV2/src/components/KwikPassCheckout.js`** (and its `src/kwikpassV2` equivalent path):
    *   **Initial Implementation (27/11/2025, 18:51:28)**: This file handles events from the `KPCheckout` WebView. It implemented logic to capture `modal_closed`, `orderSuccess`, `openInBrowserTab`, and `gk-checkout-disable` events. For `orderSuccess`, it extracted `orderId` from a GraphQL GID and `orderKey` from the `checkoutUrl` using regular expressions. It also included logic to perform a `KWIKPASS_LOGIN` if the user was not already logged in.
    *   **Regex Refinement and Debugging (27/11/2025, 22:53:59 - 23:16:45)**: Multiple iterations involved adding extensive `console.log` statements to debug the extraction of `checkoutUrl`, `orderGID`, `orderId`, and `orderKey`. A significant functional change was the addition of `orderKeyRegexExtra = /\/orders\/([^/?#]+)/;` to handle alternative `orderKey` formats in the `checkoutUrl`, broadening the parsing capabilities.
    *   **Order Success Rework (27/11/2025, 23:30:22)**: A major change occurred, shifting the `orderSuccess` handling. The logic for extracting `orderKey` was removed, and an explicit comment was added stating that `checkoutUrl` should be used directly for redirection without manual key extraction or URL rebuilding. The `SET_ORDER_COMPLETE` action was temporarily commented out, and the primary action became `OPEN_IN_WEBVIEW` using the provided `checkoutUrl`.
    *   **URL Protocol Normalization (28/11/2025, 00:25:40 - 07:55:36)**: Several commits focused on ensuring the `checkoutUrl` consistently starts with `https://`, prepending it if missing. This indicates issues with inconsistent URL formats from the GoKwik SDK.
    *   **Temporary Shopify Thank You Page Redirection (28/11/2025, 12:25:54 - 12:28:43)**: For a short period, the `orderSuccess` handling changed dramatically. Instead of using the `checkoutUrl` from the GoKwik SDK, the application constructed its own Shopify `thank_you` page URL (e.g., `https://your-shop.myshopify.com/thank_you?order_id=${orderId}`) and redirected to that within a WebView. The `SET_ORDER_COMPLETE` action was called with an empty `orderKey`.
    *   **Partial Reversion and Consolidation (28/11/2025, 12:37:42 - 12:41:56)**: The logic largely reverted to using the `checkoutUrl` provided by the GoKwik SDK for `OPEN_IN_WEBVIEW` (still with `https` prefixing logic). The `orderId` was extracted from `orderGID`, and `orderKey` was again attempted to be extracted from `checkoutUrl` using `orderKeyRegex`. `SET_ORDER_COMPLETE` continued to be called with `orderID` and `orderKey` (potentially empty if not found).
    *   **Further Debugging & Minor Tweaks (28/11/2025, 17:10:35 - 01/12/2025, 18:04:25)**: Subsequent changes mostly involved adding or modifying `console.log` statements for debugging `message.eventname` and attempting (and then reverting/commenting out) to track `gokwik_events` with a `count` variable. The core logic for `orderSuccess` largely remained consistent with the state around `28/11, 12:41:56`.

2.  **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/node_modules/@appmaker-packages/extension-kwikpass-expo-package/src/checkout/index.tsx`**:
    *   **Single Entry (27/11/2025, 18:54:00)**: This file acts as a wrapper, passing `checkoutData` and event callbacks (`onEvent`, `onError`, `onNavigationStateChange`) to the `Checkout` component. A `console.log` for `checkoutData` was added. This file remained stable in the provided logs.

3.  **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/node_modules/@appmaker-packages/extension-kwikpass-expo-package/src/checkout/Checkout.tsx`**:
    *   **Multiple Entries (27/11/2025, 18:57:26 - 27/11/2025, 20:35:26)**: This file defines the core WebView component. It contains `injectJavaScript` to listen for various `gokwikSdk` events (`modal_closed`, `orderSuccess`, `openInBrowserTab`, `gokwikLoaded`, `gokwik_events`, `gk-checkout-disable`) and post them as messages to the React Native context. It includes logic for initiating the WebView URL based on merchant type (Shopify/custom), handling native back button presses, app state changes, and specific UPI payment intent redirection logic with error alerts for uninstalled apps. No functional changes were observed across these timestamps, suggesting snapshots of the same code.

4.  **`/Users/mayuresh.madav/Documents/sdk/appmaker-starter-app-expo-53-update/packages/kwikpassV2/src/pages/CheckoutOptions.js`**:
    *   **Multiple Entries (28/11/2025, 14:48:50 - 14:52:20)**: This file defines a static page structure that includes the `kwikpass/checkout` block. No functional changes were observed.

### Timestamps of Significant Changes:

*   **27/11/2025, 18:51:28**: Initial detailed implementation of KwikPassCheckout event handling.
*   **27/11/2025, 23:16:36**: Introduction of `orderKeyRegexExtra` for more robust `orderKey` parsing.
*   **27/11/2025, 23:30:22**: Major refactoring of `orderSuccess` handling, emphasizing direct `checkoutUrl` redirection over manual key extraction.
*   **28/11/2025, 00:25:40 - 07:55:36**: Consistent efforts to normalize `checkoutUrl` to include `https://`.
*   **28/11/2025, 12:25:54**: Temporary but significant shift to constructing and redirecting to a Shopify `thank_you` page URL rather than the GoKwik provided `checkoutUrl`.
*   **28/11/2025, 12:37:42**: Reversion to using the GoKwik provided `checkoutUrl` for redirection and re-introducing `orderKey` extraction logic.

### Patterns and Recurring Elements:

*   **GoKwik SDK Integration**: The central theme is deep integration with the `gokwikSdk` through a WebView, listening to its lifecycle and success events.
*   **Shopify Context**: The code frequently interacts with Shopify-specific identifiers (GraphQL GIDs for Cart, Shop, Order) and uses `useShopifyAccessToken`, indicating the target platform is Shopify.
*   **Event-Driven Architecture**: Communication between the WebView (GoKwik SDK) and the native React Native application is explicitly event-driven, with messages being passed via `window.ReactNativeWebView.postMessage`.
*   **Persistent Debugging**: There are numerous `console.log` statements added, modified, and sometimes removed throughout the development, especially in `KwikPassCheckout.js`, highlighting an active debugging process to ensure correct event data parsing and handling.
*   **Iterative Refinement of `orderSuccess` Logic**: The `orderSuccess` event handling in `KwikPassCheckout.js` shows a significant amount of iteration, particularly concerning how to extract Shopify order details (`orderId`, `orderKey`) and what URL to redirect to after a successful GoKwik checkout. This suggests challenges in reliably processing callback data or meeting specific integration requirements.
*   **UPI Payment Handling**: The `Checkout.tsx` component includes specific logic to handle UPI payment intents on Android, including detecting and redirecting to various UPI apps and providing error feedback if an app is not installed.