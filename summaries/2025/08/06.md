# Activity Summary for 06/08/2025

## 14:15:56
The log shows multiple updates to the `/Users/madav/Documents/checkout UI/gokwik.pdp` project, primarily focused on the `EnvironmentService.ts` file and `merchant.html` file.

The `EnvironmentService.ts` file underwent several revisions between 12:08:53 and 12:19:09 on June 8th, 2025.  These revisions primarily involved modifications to the logic determining base URLs for various APIs (e.g., `getHealthServiceBaseUrl`, `getAddressSuggestionBaseUrl`, `api_url`, `experiment_url`, `twidpay_api`, `kp_api`, `cdn_path`, `analytics_api`, `analytics_api_v2`) based on the current environment (`env`).  The changes involve adding, removing, or altering URLs for different environments (dev, qa, sandbox, production, etc.).  A notable change is the handling of the 'local' environment within the `api_url` function, where the default URL switches from `https://sandbox.gokwik.co` to  `https://qa-core-api.dev.gokwik.in` between revisions. The `setCart()` function also shows a change in the `cartjsObject` data.  The most significant change is the addition of more detailed information and the change of token in the cart object.


The `merchant.html` file was updated at 12:18:38 on June 8th, 2025. This update involves changes to the client-side JavaScript code handling the Gokwik SDK initialization and communication with the parent window.  It includes setting cookies (`gk_landing_page`, `gk_orig_referrer`), handling postMessage events,  and defining  `merchantInfo` object which seems to specify merchant details (mid, environment, etc.). The commented-out analytics script suggests a possible removal or change in the analytics implementation strategy.  The code also includes a button with hardcoded `mid`, `appid`, and `appsecret` attributes, which might be security concern and should be reviewed.

In summary, the code changes reflect adjustments to API endpoints and environmental configurations, along with client-side improvements concerning the Gokwik SDK integration and  merchant information handling.  The frequent updates to `EnvironmentService.ts` suggest ongoing development and testing across various environments.  The inclusion of `merchantInfo` with potentially sensitive data in `merchant.html` highlights the need for a thorough security review.


## 14:18:29
The log shows code changes across several files within a checkout dashboard UI project.  The primary focus is on the `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/library/utilities/interface/interface.ts` file which underwent a significant update at 06/08/2025, 11:32:50.  This file defines numerous TypeScript interfaces encompassing various data structures related to orders, line items, discounts, transactions, cart items, shipping, and store credits. These interfaces are comprehensive, suggesting a robust data model for the application.

The `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/settings/integration-settings/giftCardVouchers.tsx` file was updated twice, at 06/08/2025, 11:32:56 and 06/08/2025, 11:33:31. These changes involve a React component responsible for managing gift card and voucher integration settings. The component interacts with Redux store selectors (`selectMerchantCreds`, `selectMerchantRewards`) and actions (`saveCreds`, `saveRewards`) to handle configuration changes. There's a significant amount of logic for managing the enablement and customization of different gift card providers (Shopify, Qwickcilver, Gyftr), including interdependencies and error handling. The second update seems to be a minor correction, possibly related to initial form values on load.

The `/Users/madav/Documents/dashboard_checkout/dashboard-ui-configuration/src/index.ejs` file was updated multiple times (06/08/2025, 11:47:37, 06/08/2025, 12:15:50, and 06/08/2025, 13:30:01). This file is an EJS template that generates HTML for the dashboard UI configuration. The updates appear to be related to configuring import maps for different environments (local, dev, qa, sandbox, production).  The URLs point to various backend services for different environments; a clear pattern is established for consistent environment-specific URLs.  Production also contains some New Relic and Clarity analytics code additions.  The changes across multiple timestamps suggest iterative adjustments to the import map configurations and integration of analytics.

Finally, the `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/orders/edit-orders/index.tsx` file was updated on 06/08/2025, 13:40:12. This file contains a React component for editing order details. It utilizes `gokwik-ui-kit` components for the UI, Redux for state management, and custom utility functions for API calls and data formatting.  The component handles the update of order line items, discounts, shipping addresses, and maintains state for various UI elements (modals, drawers).  The code is complex and highly interactive, reflecting a sophisticated order management feature.


## 16:15:59
The log shows modifications to the `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/orders` directory.  The primary focus of the changes is on the `edit-orders/index.tsx` and `orders.tsx` files, both related to order management within a dashboard UI.

**`/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/orders/edit-orders/index.tsx`**: This file underwent multiple revisions between 15:19:39 and 15:40:55 on June 8th, 2025.  The changes appear to be iterative refinements to a React component responsible for editing order details. The core functionality involves managing line items (adding, removing, modifying quantities), applying discounts (with options for fixed amounts or percentages), and handling UI elements like modals and tables.  The code heavily utilizes the `gokwik-ui-kit` component library for UI rendering.  No significant structural changes are apparent; the revisions likely focused on bug fixes, improved UI interactions, and enhanced discount calculation logic.

**`/Users/madav/Documents/dashboard_checkout/dashboard-ui-configuration/src/index.ejs`**: This file, modified at 15:35:47 on June 8th, 2025, is an EJS template likely used for generating HTML for the dashboard UI.  It defines the import map for various Gokwik dashboard modules (configuration, utilities, checkout, payment, etc.), dynamically switching the URLs based on the `deployedEnv` variable (dev, qa, sandbox, production).  It also includes script tags for things like `regenerator-runtime` (for async/await compatibility), and potentially for analytics (Clarity and New Relic).  The inclusion of conditional logic based on environment variables suggests a strategy for managing different deployments of the dashboard application.

**`/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/orders/orders.tsx`**: This file was updated twice, at 15:42:28 and 15:42:48 on June 8th, 2025.  The changes pertain to a React component for displaying and filtering a list of orders. The component interacts with Redux for state management, uses custom hooks for data fetching and filtering,  and renders a table of orders using the `gokwik-ui-kit` library.  The code includes functionalities for pagination, sorting, and applying various filters (date range, email, phone number, UTM parameters).  RTO (Return to Origin) score handling is conditionally rendered based on merchant configuration. The minor revisions between the two timestamps likely involved small adjustments or bug fixes.  The code also uses single-spa's `navigateToUrl` for navigation.


The changes across all files demonstrate a consistent use of the `gokwik-ui-kit` component library and a focus on creating a robust and feature-rich order management interface within a single-spa application.  The inclusion of different URLs based on environment variables signifies a well-structured approach for deploying the application in various environments.


## 17:15:56
The log shows code changes on June 8th, 2025, primarily focused on the `/Users/madav/Documents/dashboard_checkout/dashboard-ui-configuration/src/index.ejs` file.  This file is an EJS template that dynamically generates HTML, specifically configuring import maps for different environments (local, dev, qa, sandbox, production).

The key change is the conditional inclusion of  `<script type="systemjs-importmap">` blocks. These blocks define the URLs for various Gokwik modules (`@gokwik/configuration`, `@gokwik/utilities`, etc.), altering URLs based on the `deployedEnv` variable.  Different environments point to different base URLs: `localhost` for local development, `dev-dashboard.dev.gokwik.in` for development, `qa-dashboard.dev.gokwik.in` for QA, and `sandbox-dashboard.dev.gokwik.in` for sandbox.  The production environment includes additional scripts for Clarity and New Relic monitoring.  The localhost configuration uses local URLs (`//localhost:9000/gokwik-configuration.js`, etc.) while others utilize URLs on `dev.gokwik.in` subdomains.  The `index.ejs` file also includes scripts for React, React-DOM, and single-spa, suggesting a micro-frontend architecture.

The timestamp for the significant changes in `index.ejs` is 17:01:28.  There is no discernible pattern in the content changes beyond the environment-specific URL adjustments.  The code snippets for production environment include New Relic and Clarity analytics integrations.


## 18:16:32
The log shows a series of code modifications to `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/abandoned-cart/index.tsx` and `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/abandoned-cart/abandoned-cart-details/abcDetails.tsx` between 17:29:38 and 18:13:06 on June 8th, 2025.

The `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/abandoned-cart/index.tsx` file underwent several iterations primarily focused on refining the `columns` array within the `export default function ()` component.  Changes involved commenting out and uncommenting parts of the `render` function for the 'Cart ID' column (17:34:35, 17:34:59, 17:48:00, 17:48:30, 17:49:02, 17:49:56, 17:57:10, 17:57:37, 18:02:06).  The most significant change within this period involved adding `request_id` to the Cart ID link  (17:48:00 onwards). There was also a minor addition of a `console.log(record)` statement for debugging purposes. The final version of the link in `columns` array includes both `created_at` and `request_id` query parameters.


The `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/abandoned-cart/abandoned-cart-details/abcDetails.tsx` file was modified between 17:53:36 and 18:13:06.  The key change here involved altering the  `fetchAbcDetails` function's API call URL (17:58:02, 17:58:37, 18:11:14, 18:13:06). The modifications focused on correctly incorporating `requestIdParam` into the API endpoint, making sure the URL structure accurately reflects the API's expectation.  Additionally, the `Edit Cart` button in the UI was enhanced to include `phoneHash` in the state passed to the Edit Cart component (18:11:14, 18:13:06).  This suggests a change in how customer phone number data is handled.


The code consistently uses `makeAPICall` for API interactions, `useSelector` and `useDispatch` for Redux state management, and `dayjs` for date manipulation. The codebase appears to be React-based, leveraging components from `gokwik-ui-kit` and other Gokwik libraries.  There's a recurring pattern of error handling using `message.error` and logging events with `logEvent`.  The overall pattern shows iterative refinement of the UI and API interaction logic related to abandoned carts.


## 19:16:40
The `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/abandoned-cart/abandoned-cart-details/editAbcCart.tsx` file underwent multiple revisions on June 8th, 2025.  The primary focus of these changes appears to be refining the `fetchCustomer` function.

Initially, `fetchCustomer` used `phone_hash` as a parameter. Subsequent updates modified it to accept either a phone number (`phone`) or `phone_hash` data,  eventually settling on a structure where it accepts a boolean `phone` and a `data` parameter, consolidating the logic. The parameter passed to the API call (`makeAPICall`) was adjusted to include either `ph` (presumably a shortened version of phone_hash) or `phone`, based on the `phone` flag.  Later, the function was further refined to handle parameters within a single `params` object for cleaner structure.  The `fetchCustomerAddressess` function also changed to accept a `params` object instead of just a `customer_id`.


The changes were made in a series of incremental updates between 18:17:26 and 19:15:39.  There's a recurring pattern of error handling using `message.error` for various API calls (fetching customer, creating customer, creating address, fetching addresses). The code consistently uses the `makeAPICall` function for API interactions.  The overall structure of the component, including the state management and API calls, remained largely consistent, with the bulk of the modifications focusing on the customer fetching and parameter handling.


## 20:15:54
The log shows three revisions of `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/abandoned-cart/abandoned-cart-details/editAbcCart.tsx` between 19:21:44 and 19:28:52 on June 8th, 2025.  These revisions appear to be minor and likely involve bug fixes or small adjustments, as the core functionality of the `editAbcCart` component remains the same across all three versions. The most notable change in the third revision is a modification to the `fetchAddress` function; the `params` object in the `makeAPICall` function now includes `reqId || abcDetailsData?.request_id` instead of just `reqId`, suggesting a fix to handle cases where `reqId` might be null.


A separate file, `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/orders/edit-orders/index.tsx`, was modified at 19:58:07 on the same day. This file contains a React component for editing orders. The code is significantly larger and focuses on managing order line items, applying discounts, and interacting with a UI (using `gokwik-ui-kit` components).  The component includes features for adding, removing, and modifying quantities of products, managing discounts (both fixed amount and percentage-based), and handling recently deleted items.  It uses `makeAPICall` for API interactions, suggesting integration with a backend system.  The use of `useSelector` indicates usage of Redux for state management.


## 21:15:53
This commit on `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/orders/edit-orders/index.tsx` at 06/08/2025, 21:11:20 significantly updates the `EditOrder` component.  The changes involve extensive modifications to handle order line items, including adding, removing, and modifying quantities.  A key feature is the addition of discount functionality with options for fixed amount or percentage discounts.  The component utilizes the `gokwik-ui-kit` for UI elements and `react-redux` for state management.  The code includes functions for:

* **Managing line items:**  `setLineItems`, `modifyQty`, `deleteItem`, `handleReAddItem`.  These functions handle adding, removing, and updating the quantity of products within the order.  The UI renders a table using the `Table` component from `gokwik-ui-kit`, displaying product details, quantity, and total price.  Calculations for item totals and grand totals are included, considering discounts.

* **Discount management:**  A `discount` state variable handles discount details (type, value, title, application status, etc.). Functions like `updateState`, `handleRemoveDiscounts`, and `handleOk` manage discount application and removal.  The system supports both fixed amount and percentage-based discounts, applying them to individual items and recalculating the total.  Recently deleted items are stored and can be re-added.

* **UI interactions:** The code uses numerous components from `gokwik-ui-kit` (like `Row`, `Col`, `Button`, `Modal`, `Table`, `InputNumber`, etc.) to create the user interface.  It also uses `react-router` and `single-spa` for navigation.

The component's logic is intricate, involving numerous state variables and functions to handle the various aspects of editing an order and applying discounts.  Error handling (e.g., checking for empty discount titles) is included.  The use of `useMemo` for data transformations improves performance.


## 23:18:31
The log shows multiple revisions of `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/pages/orders/edit-orders/index.tsx`  between 21:16:46 and 21:31:15 on 06/08/2025.  The changes appear to be minor edits and likely do not represent significant functional alterations.  The code consistently focuses on a React component managing order details, including line items, discounts, and a table displaying product information.  The `formatAmount` function is heavily used for formatting prices, suggesting a focus on user interface presentation of monetary values. The use of `useMemo` and `useState` hooks indicate optimization strategies for performance and state management within the React component.  No discernible patterns or recurring changes beyond these minor edits are evident.  Finally,  a change at 21:26:23 imports `removeDuplicatesByKey` from the helper file, indicating an addition of duplicate removal functionality sometime between 21:17:39 and 21:26:23.  The file `/Users/madav/Documents/dashboard_checkout/checkout-dashboard-ui/src/library/utilities/helpers/helper.ts` was updated at 21:24:50, adding this function.
